# For Morocco Makhzen content

lands_of_anarchy_tribes_of_marrakech_bar = {
	name = "lands_of_anarchy_tribes_of_marrakech_bar"
	desc = "lands_of_anarchy_tribes_of_marrakech_bar_desc"

	default_bad = yes

	monthly_progress = {
		owner = {
			# Ruler popularity
			if = {
				limit = {
					OR = {
					ruler.popularity < 0
					ruler.popularity > 0
					}
				}
				add = {
					desc = "lands_of_anarchy_ruler_popularity_tt"
					value = ruler.popularity
					divide = 50
				}
			}
			# +each Marrakech barracks level
			add = {
				desc = "lands_of_anarchy_barracks_level_tt"
				s:STATE_MARRAKECH.region_state:MOR ?= {
					every_scope_building = {
						limit = {
							is_building_type = building_barrack
						}
		  				add = this.level
		  				divide = 10
		 			}
				}
			}
			# +each Marrakech government administration level
			add = {
				desc = "lands_of_anarchy_government_administration_level_tt"
				s:STATE_MARRAKECH.region_state:MOR ?= {
					every_scope_building = {
		  				limit = {
		   					is_building_type = building_government_administration
		  				}
		  				add = this.level
		  				divide = 2
		 			}
				}
			}
			# Urbanization rate
			add = {
				desc = "lands_of_anarchy_urbanization_rate_tt"
				s:STATE_MARRAKECH.region_state:MOR ?= {
					add = this.state_urbanization_rate
					multiply = 10
					subtract = 1
				}
			}
			# Average SOL threshold in state
			add = {
				desc = "lands_of_anarchy_average_sol_tt"
				s:STATE_MARRAKECH.region_state:MOR ?= {
					value = average_sol
					subtract = 10
					divide = 2
				}
			}
			# Radicals in state
			add = {
				desc = "lands_of_anarchy_state_radicals_tt"
				s:STATE_MARRAKECH.region_state:MOR ?= {
					value = radical_fraction
					multiply = -50
				}
			}
			# Legitimacy below 75
			add = {
				desc = "lands_of_anarchy_legitimacy_tt"
				value = legitimacy
				subtract = 75
				divide = 30
			}
			# Fez education access
			add = {
				desc = "lands_of_anarchy_fez_education_access_tt"
				owner.capital ?= {
					value = literacy_rate
					multiply = 5
					subtract = 1
					max = 0.5
				}
			}
			# Fez Infrastructure
			add = {
				desc = "lands_of_anarchy_fez_infrastructure_tt"
				owner.capital ?= {
					value = infrastructure
					divide = 4.5
					subtract = 9
					max = 0.5
				}
			}
			# On Harka
			if = {
				limit = {
					has_modifier = lands_of_anarchy_harka_mod
				}
				add = {
					desc = "lands_of_anarchy_harka_popularity_mod"
					value = 1
				}
			}
			# lands_of_anarchy.4 - appointed IG tribe leader
			if = {
				limit = {
					owner = {
						any_scope_character = {
							has_modifier = lands_of_anarchy_tribal_marrakech_leader_mod
						}
					}
				}
				add = {
					desc = "lands_of_anarchy_tribe_leader_tt"
					value = 1.5
				}
			}
			# lands_of_anarchy.4 - rejected IG tribe leader
			if = {
				limit = {
					has_variable = tribal_leader_appointment_rejected
				}
				subtract = {
					desc = "lands_of_anarchy_tribe_leader_rejected_tt"
					value = 0.3
				}
			}
			# lands_of_anarchy.5 - sent medicine
			if = {
				limit = {
					s:STATE_MARRAKECH.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_tribe_recieved_medicine_mod
					}
				}
				add = {
					desc = "lands_of_anarchy_sent_medicine_to_tribes_tt"
					value = 1
				}
			}
			# lands_of_anarchy.5 - refused to send medicine
			if = {
				limit = {
					s:STATE_MARRAKECH.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_refused_medicine_mod
					}
				}
				subtract = {
					desc = "lands_of_anarchy_refused_medicine_tt"
					value = 0.5
				}
			}
			# The state is not ours anymore
			if = {
				limit = {
					s:STATE_MARRAKECH = {
						NOT = {
							any_scope_state = {
								owner = root.owner
							}
						}
					}
				}
				subtract = {
					desc = "lands_of_anarchy_lost_state_tt"
					value = 50
				}
			}
		}
	}
	start_value = 260
	min_value = 1
	max_value = 500
}

lands_of_anarchy_tribes_of_al_rif_bar = {
	name = "lands_of_anarchy_tribes_of_al_rif_bar"
	desc = "lands_of_anarchy_tribes_of_al_rif_bar_desc"

	default_green = yes

	monthly_progress = {
		owner = {
			if = {
				limit = {
					OR = {
					ruler.popularity < 0
					ruler.popularity > 0
					}
				}
				add = {
					desc = "lands_of_anarchy_ruler_popularity_tt"
					value = ruler.popularity
					divide = 50
				}
			}
			# +each al Rif barracks level
			add = {
				desc = "lands_of_anarchy_barracks_level_tt"
				s:STATE_AL_RIF.region_state:MOR ?= {
					every_scope_building = {
		  				limit = {
		   					is_building_type = building_barrack
		  				}
		  			add = this.level
		  			divide = 10
		 			}
				}
			}
			# +each al Rif government administration level
			add = {
				desc = "lands_of_anarchy_government_administration_level_tt"
				s:STATE_AL_RIF.region_state:MOR ?= {
					every_scope_building = {
		  				limit = {
		   					is_building_type = building_government_administration
		  				}
		  			add = this.level
		 			}
				}
			}
			# Urbanization rate
			add = {
				desc = "lands_of_anarchy_urbanization_rate_tt"
				s:STATE_AL_RIF.region_state:MOR ?= {
					add = this.state_urbanization_rate
					multiply = 10
					subtract = 1
				}
			}
			# Average SOL threshold in state
			add = {
				desc = "lands_of_anarchy_average_sol_tt"
				s:STATE_AL_RIF.region_state:MOR ?= {
					value = average_sol
					subtract = 10
					divide = 2
				}
			}
			# Radicals in state
			add = {
				desc = "lands_of_anarchy_state_radicals_tt"
				s:STATE_AL_RIF.region_state:MOR ?= {
					value = radical_fraction
					multiply = -50
				}
			}
			# Negative authority
			if = {
				limit = {
						authority < 0
				}
				add = {
					desc = "lands_of_anarchy_negative_authority_tt"
					value = -1
				}
			}
			# Legitimacy below 75
			add = {
				desc = "lands_of_anarchy_legitimacy_tt"
				value = legitimacy
				subtract = 75
				divide = 30
			}
			# Fez education access
			add = {
				desc = "lands_of_anarchy_fez_education_access_tt"
				owner.capital ?= {
					value = literacy_rate
					multiply = 5
					subtract = 1
					max = 0.5
				}
			}
			# Fez Infrastructure
			add = {
				desc = "lands_of_anarchy_fez_infrastructure_tt"
				owner.capital ?= {
					value = infrastructure
					divide = 4.5
					subtract = 9
					max = 0.5
				}
			}
			# On Harka
			if = {
				limit = {
					has_modifier = lands_of_anarchy_harka_mod
				}
				add = {
					desc = "lands_of_anarchy_harka_popularity_mod"
					value = 1
				}
			}
			# lands_of_anarchy.4 - appointed IG tribe leader
			if = {
				limit = {
					owner = {
						any_scope_character = {
							has_modifier = lands_of_anarchy_tribal_al_rif_leader_mod
						}
					}
				}
				add = {
					desc = "lands_of_anarchy_tribe_leader_tt"
					value = 1.5
				}
			}
			# lands_of_anarchy.4 - rejected IG tribe leader
			if = {
				limit = {
					has_variable = tribal_leader_appointment_rejected
				}
				subtract = {
					desc = "lands_of_anarchy_tribe_leader_rejected_tt"
					value = 0.3
				}
			}
			# lands_of_anarchy.5 - sent medicine
			if = {
				limit = {
					s:STATE_AL_RIF.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_tribe_recieved_medicine_mod
					}
				}
				add = {
					desc = "lands_of_anarchy_sent_medicine_to_tribes_tt"
					value = 1
				}
			}
			# lands_of_anarchy.5 - refused to send medicine
			if = {
				limit = {
					s:STATE_AL_RIF.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_refused_medicine_mod
					}
				}
				subtract = {
					desc = "lands_of_anarchy_refused_medicine_tt"
					value = 0.5
				}
			}
			# The state is not ours anymore
			if = {
				limit = {
					s:STATE_AL_RIF = {
						NOT = {
							any_scope_state = {
								owner = root
							}
						}
					}
				}
				subtract = {
					desc = "lands_of_anarchy_lost_state_tt"
					value = 50
				}
			}
		}
	}
	start_value = 260
	min_value = 1
	max_value = 500
}

lands_of_anarchy_tribes_of_inner_morocco_bar = {
	name = "lands_of_anarchy_tribes_of_inner_morocco_bar"
	desc = "lands_of_anarchy_tribes_of_inner_morocco_bar_desc"

	default = yes

	monthly_progress = {
		owner = {
			if = {
				limit = {
					OR = {
					ruler.popularity < 0
					ruler.popularity > 0
					}
				}
				add = {
					desc = "lands_of_anarchy_ruler_popularity_tt"
					value = ruler.popularity
					divide = 50
				}
			}
			# +each Inner Morocco barracks level
			add = {
				desc = "lands_of_anarchy_barracks_level_tt"
				s:STATE_INNER_MOROCCO.region_state:MOR ?= {
					every_scope_building = {
		  				limit = {
		   					is_building_type = building_barrack
		  				}
			  			add = this.level
			  			divide = 10
		 			}
				}
			}
			# +each Inner Morocco government administration level
			add = {
				desc = "lands_of_anarchy_government_administration_level_tt"
				s:STATE_INNER_MOROCCO.region_state:MOR ?= {
					every_scope_building = {
		  				limit = {
		   					is_building_type = building_government_administration
		  				}
		  				add = this.level
		 			}
				}
			}
			# Urbanization rate
			add = {
				desc = "lands_of_anarchy_urbanization_rate_tt"
				s:STATE_INNER_MOROCCO.region_state:MOR ?= {
					add = this.state_urbanization_rate
					multiply = 10
					subtract = 1
				}
			}
			# Average SOL threshold in state
			add = {
				desc = "lands_of_anarchy_average_sol_tt"
				s:STATE_INNER_MOROCCO.region_state:MOR ?= {
					value = average_sol
					subtract = 10
					divide = 2
				}
			}
			# Radicals in state
			add = {
				desc = "lands_of_anarchy_state_radicals_tt"
				s:STATE_INNER_MOROCCO.region_state:MOR ?= {
					value = radical_fraction
					multiply = -50
				}
			}
			# Legitimacy below 75
			add = {
				desc = "lands_of_anarchy_legitimacy_tt"
				value = legitimacy
				subtract = 75
				divide = 30
			}
			# Fez education access
			add = {
				desc = "lands_of_anarchy_fez_education_access_tt"
				owner.capital ?= {
					value = literacy_rate
					multiply = 5
					subtract = 1
					max = 0.5
				}
			}
			# Fez Infrastructure
			add = {
				desc = "lands_of_anarchy_fez_infrastructure_tt"
				owner.capital ?= {
					value = infrastructure
					divide = 4.5
					subtract = 9
					max = 0.5
				}
			}
			# On Harka
			if = {
				limit = {
					has_modifier = lands_of_anarchy_harka_mod
				}
				add = {
					desc = "lands_of_anarchy_on_harka_tt"
					value = 1
				}
			}
			# lands_of_anarchy.4 - appointed IG tribe leader
			if = {
				limit = {
					owner = {
						any_scope_character = {
							has_modifier = lands_of_anarchy_tribal_inner_morocco_leader_mod
						}
					}
				}
				add = {
					desc = "lands_of_anarchy_tribe_leader_tt"
					value = 1.5
				}
			}
			# lands_of_anarchy.4 - rejected IG tribe leader
			if = {
				limit = {
					has_variable = tribal_leader_appointment_rejected
				}
				subtract = {
					desc = "lands_of_anarchy_tribe_leader_rejected_tt"
					value = 0.3
				}
			}
			# lands_of_anarchy.5 - sent medicine
			if = {
				limit = {
					s:STATE_INNER_MOROCCO.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_tribe_recieved_medicine_mod
					}
				}
				add = {
					desc = "lands_of_anarchy_sent_medicine_to_tribes_tt"
					value = 1
				}
			}
			# lands_of_anarchy.5 - refused to send medicine
			if = {
				limit = {
					s:STATE_INNER_MOROCCO.region_state:MOR ?= {
						has_modifier = lands_of_anarchy_refused_medicine_mod
					}
				}
				subtract = {
					desc = "lands_of_anarchy_refused_medicine_tt"
					value = 0.5
				}
			}
			# The state is not ours anymore
			if = {
				limit = {
					s:STATE_INNER_MOROCCO = {
						NOT = {
							any_scope_state = {
								owner = root
							}
						}
					}
				}
				subtract = {
					desc = "lands_of_anarchy_lost_state_tt"
					value = 50
				}
			}
		}
	}
	start_value = 260
	min_value = 1
	max_value = 500
}
