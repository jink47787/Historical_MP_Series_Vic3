character_russia_ruler_succession_chain_effect = {
	if = {
		limit = {
			has_template = RUS_alexander_ii
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.1 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_tsarevich_nicholas_alexandrovich
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.3 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_alexander_iii
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.4 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_nicholas_ii
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.5 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_alexei_ii
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.9 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_michael_ii
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.10 popup = yes }
		}
	}
	else_if = {
		limit = {
			has_template = RUS_george_i
		}
		owner ?= {
			trigger_event = { id = russia_monarchy.11 popup = yes }
		}
	}
}

character_sweden_ruler_succession_chain_effect = {
	if = {
		limit = {
			has_template = swe_oscar_bernadotte_template
		}
		owner ?= {
			trigger_event = { id = sweden_monarchy.1 popup = yes }
		}
	}
}

character_austria_ruler_succession_chain_effect = {
	if = {
		limit = {
			has_template = aus_franz_josef_I_habsburg_template
			game_date < 1858.8.21
		}
		owner ?= {
			create_character = {
				template = aus_maximilian_I_habsburg_template
			}
		}
	}
	# Rudolf is spawned by event
	else_if = {
		limit = {
			OR = {
				has_template = aus_franz_josef_I_habsburg_template
				has_template = aus_maximilian_I_habsburg_template
			}
			game_date > 1863.12.18
		}
		owner ?= {
			create_character = {
				template = aus_franz_ferdinand
			}
		}
	}
	else_if = {
		limit = {
			has_template = aus_franz_ferdinand
			game_date >= 1887.8.18
		}
		owner ?= {
			create_character = {
				template = aus_karl_I_habsburg
			}
		}
	}
}

character_serbia_ruler_succession_chain_effect = {
	### Orleanists
	if = {
		limit = {
			has_variable = house_obrenovic
		}
		character_generate_obrenovic_serbia_heir = yes
	}

	### Legitimists
	if = {
		limit = {
			has_variable = house_karadordevic
		}
		character_generate_karadordevic_serbia_heir = yes
	}
}

character_generate_obrenovic_serbia_heir = {
	### Obrenovics
	if = { # Once Milan succeeds to the Serbian throne, create Mihailo
		limit = {
			has_template = SER_milan_obrenovic
		}
		owner ?= {
			create_character = {
				template = SER_mihailo_obrenovic
			}
		}
	}
	else_if = { # Once Mihailo succeeds to the Serbian throne, fire his coronation event
		limit = {
			has_template = SER_mihailo_obrenovic
		}
		owner ?= {
			trigger_event = { id = serbia.2 popup = yes }
			if = { # And spawn Milan IV as his heir
				limit = {
					game_date >= 1854.8.22
				}
				create_character = {
					template = SER_milan_iv_obrenovic
				}
			}
		}
	}
	else_if = { # Once Milan IV succeeds to the Serbian throne, make Alexander his heir if applicable
		limit = {
			has_template = SER_milan_iv_obrenovic
			game_date >= 1876.8.14
		}
		owner ?= {
			create_character = {
				template = SER_alexander_obrenovic
			}
		}
	}
}

character_generate_karadordevic_serbia_heir = {
	### Karadordevics
	if = { # Once Alexander succeeds to the Serbian throne, make Petar his heir if applicable
		limit = {
			has_template = SER_alexandar_karadordevic
			game_date >= 1844.8.14
		}
		owner ?= {
			create_character = {
				template = SER_petar_i_karadordevic
			}
		}
	}
	else_if = { # Once Petar succeeds to the Serbian throne, make George his heir if applicable
		limit = {
			has_template = SER_petar_i_karadordevic
			game_date >= 1887.9.8
		}
		owner ?= {
			create_character = {
				template = SER_george_karadordevic
			}
		}
	}
	else_if = { # If George succeeds to the Serbian throne, make Alexander his heir if applicable
		limit = {
			has_template = SER_george_karadordevic
			game_date >= 1888.12.16
		}
		owner ?= {
			create_character = {
				template = SER_alexander_i_karadordevic
			}
		}
	}
	else_if = { # Once Alexander succeeds to the Serbian throne, make Petar II his heir if applicable
		limit = {
			has_template = SER_alexander_i_karadordevic
			game_date >= 1923.9.6
		}
		owner ?= {
			create_character = {
				template = SER_petar_ii_karadordevic
			}
		}
	}
}

character_ottoman_ruler_succession_chain_effect = {
	if = {
		limit = {
			has_template = tur_abdulmecid_osmanoglu_template
			game_date > 1842.2.8
			game_date < 1876.5.30
		}
		owner ?= {
			create_character = {
				template = tur_abdulaziz_osmanoglu_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = tur_abdulaziz_osmanoglu_template
			game_date > 1840.9.21
			game_date < 1876.8.31
		}
		owner ?= {
			create_character = {
				template = tur_murad_v_osmanoglu_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = tur_murad_v_osmanoglu_template
			game_date > 1842.9.21
			game_date < 1909.4.27
		}
		owner ?= {
			create_character = {
				template = tur_abdulhamid_ii_osmanoglu_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = tur_abdulhamid_ii_osmanoglu_template
			game_date > 1844.11.2
			game_date < 1918.6.3
		}
		owner ?= {
			create_character = {
				template = tur_reshad_osmanoglu_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = tur_reshad_osmanoglu_template
			game_date > 1861.1.14
			game_date < 1922.11.1
		}
		owner ?= {
			create_character = {
				template = tur_vahideddin_osmanoglu_template
			}
		}
	}
}

character_france_ruler_succession_chain_effect = {
	### Orleanists
	if ={
		limit = {
			has_variable = house_orleans
		}
		character_generate_orleanist_france_heir = yes
	}

	### Legitimists
	if ={
		limit = {
			has_variable = legitimist_leader
		}
		character_generate_legitimist_france_heir = yes
	}

	### Bonapartists
	if ={
		limit = {
			has_variable = house_bonaparte
		}
		character_generate_bonapartist_france_heir = yes
	}
}

character_generate_orleanist_france_heir = {
	if = {
		limit = {
			has_template = FRA_ferdinand_philippe
			game_date > 1838.8.24
			game_date < 1894.1.1
		}
		owner ?= {
			create_character = {
				template = FRA_philippe_de_orleans_of_paris
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_philippe_de_orleans_of_paris
			game_date > 1869.2.6
			game_date < 1926.1.1
		}
		owner ?= {
			create_character = {
				template = FRA_philippe_de_orleans_of_orleans
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_philippe_de_orleans_of_orleans
			game_date > 1874.9.4
			game_date < 1940.1.1
		}
		owner ?= {
			create_character = {
				template = FRA_jean_de_orleans
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_jean_de_orleans
			game_date > 1908.7.5
			game_date < 1999.1.1
		}
		owner ?= {
			create_character = {
				template = FRA_henri_de_orleans
			}
		}
	}
}

character_generate_legitimist_france_heir = {
	if = {
		limit = {
			has_template = FRA_louis_antoine_de_bourbon
			game_date < 1883.1.1
		}
		owner ?= {
			create_character = {
				template = FRA_henri_de_bourbon
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_henri_de_bourbon
			game_date < 1887.1.1
		}
		owner ?= {
			create_character = {
				template = SPC_juan_iii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
	else_if = {
		limit = {
			has_template = SPC_juan_iii_de_borbon_template
			game_date > 1848.3.30
			game_date < 1909.1.1
		}
		owner ?= {
			create_character = {
				template = SPC_carlos_vii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
	else_if = {
		limit = {
			has_template = SPC_carlos_vii_de_borbon_template
			game_date > 1870.6.27
			game_date < 1931.10.2
		}
		owner ?= {
			create_character = {
				template = SPC_jaime_iii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
	else_if = {
		limit = {
			has_template = SPC_jaime_iii_de_borbon_template
			game_date > 1849.9.12
			game_date < 1936.1.1
		}
		owner ?= {
			create_character = {
				template = SPC_alfonso_i_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
}

character_generate_bonapartist_france_heir = {
	if = {
		limit = {
			has_template = fra_napoleon_iii_character_template
			game_date > 1856.3.16
		}
		owner ?= {
			create_character = {
				template = FRA_napoleon_eugene_louis_bonaparte
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_napoleon_eugene_louis_bonaparte
			game_date > 1862.7.18
		}
		owner ?= {
			create_character = {
				template = FRA_victor_bonaparte
			}
		}
	}
	else_if = {
		limit = {
			has_template = FRA_victor_bonaparte
			game_date > 1914.1.23
		}
		owner ?= {
			create_character = {
				template = FRA_louis_bonaparte
			}
		}
	}
}

character_spain_ruler_succession_chain_effect = {
	### Carlists
	if ={
		limit = {
			has_ideology = ideology:ideology_carlist
		}
		character_generate_carlist_spain_heir = yes
	}

	### Constitutionalists
	if = {
		limit = {
			NOT = {
				has_ideology = ideology:ideology_carlist
			}
		}
		character_generate_constitutional_spain_heir = yes
	}
}

character_generate_carlist_spain_heir = {
	### Carlist Spanish Monarchs
	if = {
		limit = {
			is_ruler = yes
			has_template = SPC_carlos_v_de_borbon_template
			game_date < 1861.1.13
		}
		owner = {
			create_character = {
				template = SPC_carlos_vi_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
	if = {
		limit = {
			is_ruler = yes
			has_template = SPC_carlos_vi_de_borbon_template
			game_date < 1887.11.18
		}
		owner = {
			create_character = {
				template = SPC_juan_iii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}

	if = {
		limit = {
			is_ruler = yes
			has_template = SPC_juan_iii_de_borbon_template
			game_date < 1909.8.15
			game_date > 1848.4.3
		}
		owner = {
			create_character = {
				template = SPC_carlos_vii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}

	if = {
		limit = {
			is_ruler = yes
			has_template = SPC_carlos_vii_de_borbon_template
			game_date < 1931.10.2
			game_date > 1870.6.7
		}
		owner = {
			create_character = {
				template = SPC_jaime_iii_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
	if = {
		limit = {
			is_ruler = yes
			has_template = SPC_jaime_iii_de_borbon_template
			game_date > 1849.9.12
		}
		owner = {
			create_character = {
				template = SPC_alfonso_i_de_borbon_template
				on_created = {
					character_carlist_or_legitimist_switch_effect = yes
				}
			}
		}
	}
}

character_generate_constitutional_spain_heir = {
	if = {
		limit = {
			has_template = spa_isabel_de_borbon_template
			game_date <= 1857.11.28
			game_date > 1851.12.20
		}
		owner = {
			create_character = {
				template = spa_isabel_francisca_de_borbon_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = spa_isabel_de_borbon_template
			game_date < 1886.5.17
			game_date > 1857.11.28
		}
		owner = {
			create_character = {
				template = spa_alfonso_xii_de_borbon_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = spa_alfonso_xii_de_borbon_template
			game_date > 1886.5.17
		}
		owner = {
			create_character = {
				template = spa_alfonso_xiii_de_borbon_template
			}
		}
	}
}

character_portugal_ruler_succession_chain_effect = {
	### Miguelists
	if ={
		limit = {
			has_ideology = ideology:ideology_miguelist
		}
		character_generate_miguelist_portugal_heir = yes
	}

	### Constitutionalists
	if = {
		limit = {
			NOT = {
				has_ideology = ideology:ideology_miguelist
			}
		}
		character_generate_constitutional_portugal_heir = yes
	}
}

character_generate_miguelist_portugal_heir = {
	### Miguelist Portuguese Monarchs
	if = {
		limit = {
			NOT = {
				has_template = POR_miguel_i_de_braganca_template
			}
			game_date >= 1836.1.1
			game_date < 1866.11.14
		}
		owner = {
			create_character = {
				template = POR_miguel_i_de_braganca_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = POR_miguel_i_de_braganca_template
			game_date >= 1852.8.5
			game_date < 1853.9.19
		}
		owner = {
			create_character = {
				template = POR_maria_das_neves_de_braganca_template
			}
		}
	}
	else_if = {
		limit = {
			OR = {
				has_template = POR_miguel_i_de_braganca_template
				has_template = POR_maria_das_neves_de_braganca_template
			}
			game_date >= 1853.9.19
			game_date < 1920.7.31
		}
		owner = {
			create_character = {
				template = POR_miguel_januario_de_braganca_template
			}
		}
	}
	else_if = {
		limit = {
			has_template = POR_miguel_januario_de_braganca_template
			game_date >= 1920.7.31
		}
		owner = {
			create_character = {
				template = POR_duarte_nuno_de_braganca_template
			}
		}
	}
}

character_generate_constitutional_portugal_heir = {
	#### Portuguese Monarchs
	if = { # if Maria II dies naturally, make Pedro V the ruler
		limit = {
			has_template = POR_maria_ii_de_braganca
			game_date < 1861.11.11
			game_date > 1837.9.16
		}
		owner = {
			create_character = {
				template = POR_pedro_v_de_braganca_template
			}
		}
	}
	else_if = { # if Pedro V dies naturally, make Luis I the ruler
		limit = {
			has_template = POR_pedro_v_de_braganca_template
			game_date < 1889.10.19
			game_date > 1838.10.3
		}
		owner = {
			create_character = {
				template = POR_luis_i_de_braganca_template
			}
		}
	}
	else_if = { # if Luis I dies naturally, make Carlos I the ruler
		limit = {
			has_template = POR_luis_i_de_braganca_template
			game_date < 1908.2.1
			game_date > 1863.9.28
		}
		owner = {
			create_character = {
				template = POR_carlos_i_de_braganca_template
			}
		}
	}
	else_if = { # if Carlos I dies naturally, make Manuel II the ruler
		limit = {
			has_template = POR_carlos_i_de_braganca_template
			game_date > 1889.7.2
		}
		owner = {
			create_character = {
				template = POR_manuel_ii_de_braganca_template
			}
		}
	}
}

character_morocco_ruler_succession_chain_effect = {
	if = {
		limit = {
			has_template = MOR_muhammad_al_alawi
			game_date < 1894.6.9
		}
		owner = {
			create_character = {
				template = MOR_hasan_al_alawi
			}
		}
	}
	else_if = {
		limit = {
			has_template = MOR_hasan_al_alawi
			game_date > 1881.9.21
		}
		owner = {
			create_character = {
				template = MOR_abdelaziz_al_alawi
			}
		}
	}
	else_if = {
		limit = {
			has_template = MOR_abdelaziz_al_alawi
			game_date > 1875.2.24
		}
		owner = {
			create_character = {
				template = MOR_abd_alhafid_al_alawi
			}
		}
	}
	else_if = {
		limit = {
			has_template = MOR_abd_alhafid_al_alawi
			game_date < 1927.11.17
			game_date > 1881.1.1
		}
		owner = {
			create_character = {
				template = MOR_yusef_al_alawi
			}
		}
	}
	else_if = {
		limit = {
			has_template = MOR_yusef_al_alawi
			game_date > 1909.8.10
		}
		owner = {
			create_character = {
				template = MOR_muhammad_al_v_alawi
			}
		}
	}
}
