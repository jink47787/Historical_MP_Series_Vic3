partition_ottoman_balkans = {
    # release countries if they dont exist
    if = {
        limit = {
            NOT = {
                exists = c:ALB
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:albanian
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:albanian
                }
            }
            save_scope_as = albania_scope
        }
        create_country = {
            tag = ALB
            origin = root

            state = scope:albania_scope
        }
        c:ALB ?= {
            if = {
                    limit = {
                        sr:region_balkans = {
                            any_scope_state = {
                            state_region = {
                            is_homeland = cu:albanian
                            }
                            owner = {
                                NOT = { this = root }
                            }
                        }
                    }
                    NOT = {
                        has_journal_entry = je_spoils_of_war
                    }
                }
                add_journal_entry = {
                    type = je_spoils_of_war
                }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:BUL
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:bulgarian
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:bulgarian
                }
            }
            save_scope_as = bulgaria_scope
        }
        create_country = {
            tag = BUL
            origin = root

            state = scope:bulgaria_scope
        }
        c:BUL ?= {
            if = {
                limit = {
                    sr:region_balkans = {
                        any_scope_state = {
                            state_region = {
                                is_homeland = cu:bulgarian
                            }
                            owner = {
                                NOT = { this = root }
                            }
                        }
                    }
                    NOT = {
                        has_journal_entry = je_spoils_of_war
                    }
                }
                add_journal_entry = {
                    type = je_spoils_of_war
                }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:BOS
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:bosniak
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:bosniak
                }
            }
            save_scope_as = bosnia_scope
        }
        create_country = {
            tag = BOS
            origin = root

            state = scope:bosnia_scope
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:CRO
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:croat
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:croat
                }
            }
            save_scope_as = croatia_scope
        }
        create_country = {
            tag = CRO
            origin = root

            state = scope:croatia_scope
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:MON
            }
            exists = s:STATE_MONTENEGRO.region_state:TUR
        }
        s:STATE_MONTENEGRO.region_state:TUR = {
            save_scope_as = montenegro_scope
        }
        create_country = {
            tag = MON
            origin = root

            state = scope:montenegro_scope
        }
        c:MON ?= {
            if = {
                    limit = {
                        sr:region_balkans = {
                            any_scope_state = {
                            state_region = {
                            is_homeland = cu:serb
                            }
                            owner = {
                                NOT = { this = root }
                            }
                        }
                    }
                    NOT = {
                        has_journal_entry = je_spoils_of_war
                    }
                }
                add_journal_entry = {
                    type = je_spoils_of_war
                }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:SER
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:serb
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:serb
                }
            }
            save_scope_as = serbia_scope
        }
        create_country = {
            tag = SER
            origin = root

            state = scope:serbia_scope
        }
        c:SER ?= {
            if = {
                    limit = {
                        sr:region_balkans = {
                            any_scope_state = {
                            state_region = {
                            is_homeland = cu:serb
                            }
                            owner = {
                                NOT = { this = root }
                            }
                        }
                    }
                    NOT = {
                        has_journal_entry = je_spoils_of_war
                    }
                }
                add_journal_entry = {
                    type = je_spoils_of_war
                }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:GRE
            }
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:greek
                }
            }
        }
        random_scope_state = {
            limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                state_region = {
                    is_homeland = cu:greek
                }
            }
            save_scope_as = greece_scope
        }
        create_country = {
            tag = GRE
            origin = root

            state = scope:greece_scope
        }
        c:GRE ?= {
            if = {
                    limit = {
                        sr:region_balkans = {
                            any_scope_state = {
                            state_region = {
                            is_homeland = cu:greek
                            }
                            owner = {
                                NOT = { this = root }
                            }
                        }
                    }
                    NOT = {
                        has_journal_entry = je_spoils_of_war
                    }
                }
                add_journal_entry = {
                    type = je_spoils_of_war
                }
            }
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:WAL
            }
            exists = s:STATE_WALLACHIA.region_state:TUR
        }
        s:STATE_WALLACHIA.region_state:TUR = {
            save_scope_as = wallachia_scope
        }
        create_country = {
            tag = WAL
            origin = root

            state = scope:wallachia_scope
        }
    }
    if = {
        limit = {
            NOT = {
                exists = c:MOL
            }
            exists = s:STATE_MOLDAVIA.region_state:TUR
        }
        s:STATE_MOLDAVIA.region_state:TUR = {
            save_scope_as = moldavia_scope
        }
        create_country = {
            tag = MOL
            origin = root

            state = scope:moldavia_scope
        }
    }

    # divide up states
    while = {
        limit = {
            any_scope_state = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
            }
        }
		random_country = {
			limit = {
                capital = {
                    OR = {
                        region = sr:region_balkans
                        region = sr:region_danubia
                    }
                }
				any_neighbouring_state = {
                    is_homeland_of_country_cultures = prev
					owner = root
				}
			}
			save_scope_as = new_owner_scope
		}
		random_scope_state = {
			limit = {
                OR = {
                    region = sr:region_balkans
                    region = sr:region_danubia
                }
                is_homeland_of_country_cultures = scope:new_owner_scope
				any_neighbouring_state = {
					owner = scope:new_owner_scope
				}
			}
			set_state_owner = scope:new_owner_scope
		}
		clear_saved_scope = new_owner_scope
    }

    if = {
        limit = {
            c:WAL ?= {
                is_direct_subject_of = ROOT
            }
        }
        c:WAL ?= {
            make_independent = yes
            add_journal_entry = {
                type = je_spoils_of_war
            }
        }
    }

    if = {
        limit = {
            c:MOL ?= {
                is_direct_subject_of = ROOT
            }
        }
        c:MOL ?= {
            make_independent = yes
        }
    }
}
