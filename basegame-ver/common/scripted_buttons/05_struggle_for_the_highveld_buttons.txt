# Struggle for the Highveld buttons

saf_highveld_add_boer_as_primary_button = {
	name = saf_highveld_add_boer_as_primary_button
	desc = saf_highveld_add_boer_as_primary_button_desc

	visible = {
		c:SAF ?= this
		NOR = {
			country_has_primary_culture = cu:boer
			country_has_primary_culture = cu:griqua
		}
	}

	possible = {
		# Cape Colony must adopt discriminatory laws as discriminatory as the most discriminatory Boer state, or if no Boer state exists then Cape Colony must fully accept Boer culture already.
		trigger_if = {
			limit = {
				OR = {
					exists = c:ORA
					exists = c:TRN
					exists = c:NAL
				}
			}
			trigger_if = {
				limit = {
					OR = {
						c:ORA ?= {
							has_law_or_variant = law_type:law_ethnostate
						}
						c:TRN ?= {
							has_law_or_variant = law_type:law_ethnostate
						}
						c:NAL ?= {
							has_law_or_variant = law_type:law_ethnostate
						}
					}
				}
				has_law_or_variant = law_type:law_ethnostate
			}
			trigger_else_if = {
				limit = {
					OR = {
						c:ORA ?= {
							has_law_or_variant = law_type:law_national_supremacy
						}
						c:TRN ?= {
							has_law_or_variant = law_type:law_national_supremacy
						}
						c:NAL ?= {
							has_law_or_variant = law_type:law_national_supremacy
						}
					}
				}
				OR = {
					has_law_or_variant = law_type:law_ethnostate
					has_law_or_variant = law_type:law_national_supremacy
				}
			}
			trigger_else_if = {
				limit = {
					OR = {
						c:ORA ?= {
							OR = {
								has_law_or_variant = law_type:law_racial_segregation
								has_law_or_variant = law_type:law_subjecthood
							}
						}
						c:TRN ?= {
							OR = {
								has_law_or_variant = law_type:law_racial_segregation
								has_law_or_variant = law_type:law_subjecthood
							}
						}
						c:NAL ?= {
							OR = {
								has_law_or_variant = law_type:law_racial_segregation
								has_law_or_variant = law_type:law_subjecthood
							}
						}
					}
				}
				OR = {
					has_law_or_variant = law_type:law_ethnostate
					has_law_or_variant = law_type:law_national_supremacy
					has_law_or_variant = law_type:law_racial_segregation
					has_law_or_variant = law_type:law_subjecthood
				}
			}
			trigger_else_if = {
				limit = {
					OR = {
						c:ORA ?= {
							has_law_or_variant = law_type:law_cultural_exclusion
						}
						c:TRN ?= {
							has_law_or_variant = law_type:law_cultural_exclusion
						}
						c:NAL ?= {
							has_law_or_variant = law_type:law_cultural_exclusion
						}
					}
				}
				OR = {
					has_law_or_variant = law_type:law_ethnostate
					has_law_or_variant = law_type:law_national_supremacy
					has_law_or_variant = law_type:law_racial_segregation
					has_law_or_variant = law_type:law_subjecthood
					has_law_or_variant = law_type:law_cultural_exclusion
				}
			}
			trigger_else_if = {
				limit = {
					OR = {
						c:ORA ?= {
							has_law_or_variant = law_type:law_multicultural
						}
						c:TRN ?= {
							has_law_or_variant = law_type:law_multicultural
						}
						c:NAL ?= {
							has_law_or_variant = law_type:law_multicultural
						}
					}
				}
				OR = {
					has_law_or_variant = law_type:law_ethnostate
					has_law_or_variant = law_type:law_national_supremacy
					has_law_or_variant = law_type:law_racial_segregation
					has_law_or_variant = law_type:law_subjecthood
					has_law_or_variant = law_type:law_cultural_exclusion
					has_law_or_variant = law_type:law_multicultural
				}
			}
		}
		trigger_else = {
			country_average_cultural_acceptance = {
				target = cu:boer
				value > acceptance_status_4
			}
		}
	}

	selected = {
	}

	effect = {
		add_primary_culture = cu:boer
		custom_tooltip = saf_struggle_for_the_highveld_boer_confederation_tt

		every_country = {
			limit = {
				NOT = {
					ROOT = this
					is_country_type = decentralized
				}
				country_has_primary_culture = cu:griqua
			}
			change_relations = {
				country = ROOT
				value = -30
			}
		}
	}

	ai_chance = {
		value = 1
	}
}

saf_highveld_add_griqua_as_primary_button = {
	name = saf_highveld_add_griqua_as_primary_button
	desc = saf_highveld_add_griqua_as_primary_button_desc

	visible = {
		c:SAF ?= this
		NOR = {
			country_has_primary_culture = cu:boer
			country_has_primary_culture = cu:griqua
		}
	}

	possible = {
		country_average_cultural_acceptance = {
			target = cu:griqua
			value >= acceptance_status_3
		}
	}

	selected = {
	}

	effect = {
		add_primary_culture = cu:griqua
		custom_tooltip = saf_struggle_for_the_highveld_griqua_confederation_tt

		every_country = {
			limit = {
				NOT = {
					ROOT = this
					is_country_type = decentralized
				}
				country_has_primary_culture = cu:boer
			}
			change_relations = {
				country = ROOT
				value = -30
			}
		}
	}

	ai_chance = {
		value = 1
	}
}

highveld_offer_boer_confederation_button = {
	name = highveld_offer_boer_confederation_button
	desc = highveld_offer_boer_confederation_button_desc

	visible = {
		country_has_primary_culture = cu:boer
		any_country = {
			capital = {
				OR = {
					state_region = s:STATE_NORTHERN_CAPE
					state_region = s:STATE_CAPE_COLONY
					state_region = s:STATE_EASTERN_CAPE
					state_region = s:STATE_VRYSTAAT
					state_region = s:STATE_TRANSVAAL
					state_region = s:STATE_ZULULAND
				}
			}
			is_adjacent_to_country = ROOT
			country_has_primary_culture = cu:boer
		}
	}

	possible = {
		is_at_war = no
		has_technology_researched = nationalism

		custom_tooltip = {
			text = highveld_offer_boer_confederation_tt

			any_country = {
				capital = {
					OR = {
						state_region = s:STATE_NORTHERN_CAPE
						state_region = s:STATE_CAPE_COLONY
						state_region = s:STATE_EASTERN_CAPE
						state_region = s:STATE_VRYSTAAT
						state_region = s:STATE_TRANSVAAL
						state_region = s:STATE_ZULULAND
					}
				}
				is_at_war = no
				is_player = no
				is_adjacent_to_country = ROOT
				country_has_primary_culture = cu:boer
				this.gdp < ROOT.gdp
				relations:ROOT >= relations_threshold:amicable
				OR = {
					is_subject = no
					is_subject_of = ROOT
					AND = {
						ROOT = { is_subject = yes }
						is_subject_of = ROOT.top_overlord
					}
				}
			}
		}
	}

	selected = {
	}

	effect = {
		ordered_country = {
			limit = {
				capital = {
					OR = {
						state_region = s:STATE_NORTHERN_CAPE
						state_region = s:STATE_CAPE_COLONY
						state_region = s:STATE_EASTERN_CAPE
						state_region = s:STATE_VRYSTAAT
						state_region = s:STATE_TRANSVAAL
						state_region = s:STATE_ZULULAND
					}
				}
				is_at_war = no
				is_player = no
				is_adjacent_to_country = ROOT
				country_has_primary_culture = cu:boer
				this.gdp < ROOT.gdp
				relations:ROOT >= relations_threshold:amicable
				OR = {
					is_subject = no
					is_subject_of = ROOT
					AND = {
						ROOT = { is_subject = yes }
						is_subject_of = ROOT.top_overlord
					}
				}
			}
			order_by = gdp
			save_temporary_scope_as = boer_state_to_annex
		}
		if = {
			limit = { exists = scope:boer_state_to_annex }
			annex = scope:boer_state_to_annex
		}
		else = {
			custom_tooltip = highveld_offer_boer_confederation_effect_tt
		}
	}

	ai_chance = {
		value = 1

		# South Africa is less gung-ho for confederation
		if = {
			limit = {
				any_primary_culture = {
					NOT = { cu:boer = this }
				}
			}
			subtract = 1
		}

		if = {
			limit = {
				ruler = {
					OR = {
						has_trait = cautious
						has_trait = inept
						has_trait = tactful
						has_trait = reserved
						has_ideology = ideology:ideology_traditionalist
					}
				}
			}
			subtract = 1
		}

		if = {
			limit = {
				has_technology_researched = pan-nationalism
			}
			add = 5
		}
	}
}

highveld_offer_griqua_confederation_button = {
	name = highveld_offer_griqua_confederation_button
	desc = highveld_offer_griqua_confederation_button_desc

	visible = {
		country_has_primary_culture = cu:griqua
		any_country = {
			capital = {
				OR = {
					state_region = s:STATE_NORTHERN_CAPE
					state_region = s:STATE_CAPE_COLONY
					state_region = s:STATE_EASTERN_CAPE
					state_region = s:STATE_VRYSTAAT
					state_region = s:STATE_TRANSVAAL
					state_region = s:STATE_ZULULAND
				}
			}
			is_adjacent_to_country = root
			country_has_primary_culture = cu:griqua
		}
	}

	possible = {
		is_at_war = no
		has_technology_researched = nationalism

		custom_tooltip = {
			text = highveld_offer_griqua_confederation_tt

			any_country = {
				capital = {
					OR = {
						state_region = s:STATE_NORTHERN_CAPE
						state_region = s:STATE_CAPE_COLONY
						state_region = s:STATE_EASTERN_CAPE
						state_region = s:STATE_VRYSTAAT
						state_region = s:STATE_TRANSVAAL
						state_region = s:STATE_ZULULAND
					}
				}
				is_at_war = no
				is_adjacent_to_country = ROOT
				country_has_primary_culture = cu:griqua
				this.gdp < ROOT.gdp
				relations:ROOT >= relations_threshold:amicable
				OR = {
					is_subject = no
					is_subject_of = ROOT
					AND = {
						ROOT = { is_subject = yes }
						is_subject_of = ROOT.top_overlord
					}
				}
			}
		}
	}

	selected = {
	}

	effect = {
		ordered_country = {
			limit = {
				capital = {
					OR = {
						state_region = s:STATE_NORTHERN_CAPE
						state_region = s:STATE_CAPE_COLONY
						state_region = s:STATE_EASTERN_CAPE
						state_region = s:STATE_VRYSTAAT
						state_region = s:STATE_TRANSVAAL
						state_region = s:STATE_ZULULAND
					}
				}
				is_at_war = no
				is_adjacent_to_country = ROOT
				country_has_primary_culture = cu:griqua
				this.gdp < ROOT.gdp
				relations:ROOT >= relations_threshold:amicable
				OR = {
					is_subject = no
					is_subject_of = ROOT
					AND = {
						ROOT = { is_subject = yes }
						is_subject_of = ROOT.top_overlord
					}
				}
			}
			order_by = gdp
			save_temporary_scope_as = griqua_state_to_annex
		}
		if = {
			limit = { exists = scope:griqua_state_to_annex }
			annex = scope:griqua_state_to_annex
		}
		else = {
			custom_tooltip = highveld_offer_griqua_confederation_effect_tt
		}
	}

	ai_chance = {
		value = 1

		# South Africa is less gung-ho for confederation
		if = {
			limit = {
				any_primary_culture = {
					NOT = { cu:griqua = this }
				}
			}
			subtract = 1
		}

		if = {
			limit = {
				ruler = {
					OR = {
						has_trait = cautious
						has_trait = inept
						has_trait = tactful
						has_trait = reserved
						has_ideology = ideology:ideology_traditionalist
					}
				}
			}
			subtract = 1
		}

		if = {
			limit = {
				has_technology_researched = pan-nationalism
			}
			add = 5
		}
	}
}
