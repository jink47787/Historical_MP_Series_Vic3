# Hungarian Revolution

hungarian_revolution_annex_transylvania_button = {
	name = hungarian_revolution_annex_transylvania_button
	desc = hungarian_revolution_annex_transylvania_button_desc

	visible = {
		exists = c:TRS
		NOT = {
			has_variable = hungarian_revolution_annex_transylvania_button_var
		}
	}

	possible = {
		OR = {
			AND = {
				c:TRS = {
					relations:root >= relations_threshold:amicable
				}
				OR = {
					AND = {
						exists = c:AUS
						OR = {
							is_subject_of = c:AUS
				#			is_diplomatic_play_enemy_of = c:AUS
						}
						c:TRS ?= {
							is_subject_of = c:AUS
						}
						liberty_desire >= 75
					}
					AND = {
						is_subject = no
						c:TRS ?= {
							is_subject = no
						}
					}
				}
			}
			hidden_trigger = {
				AND = {
					is_player = no
					exists = c:AUS
					is_subject_of = c:AUS
					c:TRS ?= {
						is_subject_of = c:AUS
					}
					has_variable = hungarian_revolution_twelve_points_var
				}
			}
		}
	}

	selected = {
	}

	effect = {
		if = {
			limit = {
				is_subject_of = c:AUS
				NOT = {
					is_diplomatic_play_enemy_of = c:AUS
				}
			}
			custom_tooltip = hungarian_revolution_twelve_points_tt
			custom_tooltip = hungarian_revolution_austrian_ruler
		}
		s:STATE_NORTHERN_TRANSYLVANIA = {
			add_claim = root
		}
		s:STATE_SOUTHERN_TRANSYLVANIA = {
			add_claim = root
		}
		c:TRS ?= {
			trigger_event = { id = hungary_events.4 popup = yes }
		}
		set_variable = hungarian_revolution_annex_transylvania_button_var
		if = {
			limit = {
				c:AUS ?= {
					any_subject_or_below = {
						c:TRS ?= this
					}
				}
			}
			root ?= {
				change_relations = {
					country = c:AUS
					value = -40
				}
				create_diplomatic_catalyst = {
					type = catalyst_event_negative
					target = c:AUS
				}
			}
			if = {
				limit = {
					c:AUS ?= {
						any_subject_or_below = {
							c:HUN ?= this
						}
					}
				}
				add_liberty_desire = 20
			}
		}
		show_as_tooltip = {
			custom_tooltip = {
				text = if_trs_accepts_tt
				annex = c:TRS
			}
		}
	}

	ai_chance = {
		value = 10
	}
}

hungarian_revolution_twelve_points_button = {
	name = hungarian_revolution_twelve_points_button
	desc = hungarian_revolution_twelve_points_button_desc

	visible = {
		NOT = {
			has_variable = hungarian_revolution_twelve_points_var
		}
	}

	possible = {
		OR = {
			hidden_trigger = {
				AND = {
					is_player = no
					exists = c:AUS
					is_subject_of = c:AUS
					c:TRS ?= {
						is_subject_of = c:AUS
					}
					c:AUS ?= {
						has_journal_entry = je_springtime_of_the_peoples
					}
				}
			}
			AND = {
				legitimacy >= 75
				any_interest_group = {
					is_in_government = yes
					leader = {
						has_ideology = ideology:ideology_radical
					}
				}
			}
		}
	}

	selected = {
	}

	effect = {
		set_variable = hungarian_revolution_twelve_points_var
		if = {
			limit = {
				is_subject_of = c:AUS
				NOT = {
					is_diplomatic_play_enemy_of = c:AUS
				}
			}
			c:AUS = {
				trigger_event = { id = hungary_events.9 popup = yes }
			}
			custom_tooltip = hungarian_revolution_twelve_points_tt
			custom_tooltip = hungarian_revolution_austrian_ruler
		}
		if = {
			limit = {
				OR = {
					has_law_or_variant = law_type:law_autocracy
					has_law_or_variant = law_type:law_oligarchy
				}
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_distribution_of_power_change_tt
				activate_law = law_type:law_census_voting
			}
		}
		if = {
			limit = {
				NOT = {
					has_law_or_variant = law_type:law_censorship
				}
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_free_speech_change_tt
				activate_law = law_type:law_protected_speech
			}
		}
		if = {
			limit = {
				has_law_or_variant = law_type:law_serfdom
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_land_reform_change_tt
				activate_law = law_type:law_tenant_farmers
			}
		}
		if = {
			limit = {
				has_law_or_variant = law_type:law_state_religion
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_church_and_state_change_tt
				activate_law = law_type:law_freedom_of_conscience
			}
		}
		if = {
			limit = {
				NOT = {
					has_law = law_type:law_national_guard
				}
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_internal_security_change_tt
				activate_law = law_type:law_national_guard
			}
		}
		if = {
			limit = {
				has_law_or_variant = law_type:law_land_based_taxation
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_taxation_change_tt
				activate_law = law_type:law_per_capita_based_taxation
			}
		}
		if = {
			limit = {
				has_law_or_variant = law_type:law_traditionalism
			}
			custom_tooltip = {
				text = possible_hun_lawgroup_economic_system_change_tt
				activate_law = law_type:law_interventionism
			}
		}
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_census_voting
					value > neutral
				}
				is_marginal = no
			}
			add_modifier = {
				name = modifier_the_spirit_of_48
				days = moderately_long_modifier_time
				is_decaying = yes
			}
		}
		add_modifier = {
			name = modifier_revolutionary_fervor
			days = short_modifier_time
			is_decaying = yes
		}
	}
	ai_chance = {
		value = 10
	}
}

hungarian_revolution_establish_honved_button = {
	name = hungarian_revolution_establish_honved_button
	desc = hungarian_revolution_establish_honved_button_desc

	visible = {
		NOT = {
			has_variable = hungarian_revolution_establish_honved_var
		}
	}

	possible = {
		OR = {
			AND = {
				OR = {
					has_law_or_variant = law_type:law_national_guard
					has_law_or_variant = law_type:law_mass_conscription
				}
				OR = {
					is_subject = no
					is_subject_type = subject_type_personal_union
				}
				any_scope_state = {
					has_decree = decree_enlistment_efforts
					state_region = {
						is_homeland = cu:hungarian
					}
					count >= 2
				}
				any_scope_character = {
					has_role = general
					count >= 4
				}
			}
			hidden_trigger = {
				is_player = no
				is_diplomatic_play_enemy_of = c:AUS
			}
		}
	}

	selected = {
	}

	effect = {
		set_variable = hungarian_revolution_establish_honved_var
		trigger_event = { id = hungary_events.7 popup = yes }
		custom_tooltip = possible_effects_hungary_events.7_tt
		show_as_tooltip = {
			add_fervor_target_modifier = { #changes target
				culture = cu:hungarian
				days = normal_modifier_time
				multiplier = 5
			}
		}
		show_as_tooltip = {
			add_modifier = {
				name = modifier_honved_mobilization_programme
				days = normal_modifier_time
				multiplier = money_amount_multiplier_large
			}
		}
		custom_tooltip = choose_one_of_tt
		show_as_tooltip = {
			add_modifier = {
				name = modifier_defenders_of_the_homeland
				days = normal_modifier_time
			}
			add_modifier = {
				name = modifier_autumn_campaign
				days = normal_modifier_time
			}
		}
		custom_tooltip = {
			text = every_state_with_enlistment_decree_get_modifier
		}
		show_as_tooltip = {
			capital = {
				add_modifier = {
					name = modifier_mustering_the_honved
					days = normal_modifier_time
				}
			}
		}
	}

	ai_chance = {
		value = 10
	}
}
