je_bavarocracy_convert_button = { # je_bavarocracy
	name = "je_bavarocracy_convert_button"
	desc = "je_bavarocracy_convert_button_desc"

	visible = {
		ruler = {
			religion = rel:catholic
		}
		NOT = {
			has_variable = je_bavarocracy_convert_button_var
		}
	}

	possible = {
		custom_tooltip = {
			text = je_bavarocracy_convert_possible
			ruler = {
				religion = rel:catholic
			}
		}
	}

	selected = {
	}

	effect = {
		ruler = {
			change_character_religion = rel:orthodox
			add_modifier = {
				name = modifier_suspected_crypto_catholic
				days = very_long_modifier_time
				is_decaying = yes
			}
			random_list = {
				1 = {
					add_trait = psychological_affliction
				}
				9 = {
				}
			}
		}
		if = {
			limit = {
				exists = heir
			}
			heir = {
				change_character_religion = rel:orthodox
			}
		}
		add_loyalists = {
			value = small_radicals
			religion = rel:orthodox
		}
		add_radicals = {
			value = medium_radicals
			religion = rel:catholic
		}
		custom_tooltip = {
			text = bavarocracy_progress_bar_decrease_10_tt
			je:je_bavarocracy = {
				add_progress = { value = -10 name = bavarocracy_progress_bar }
			}
		}
		c:BAV ?= {
			change_relations = {
				country = root
				value = -30
			}
			create_diplomatic_catalyst = {
				type = catalyst_event_negative
				target = root
			}
		}
		c:PAP ?= {
			change_relations = {
				country = root
				value = -30
			}
			create_diplomatic_catalyst = {
				type = catalyst_event_negative
				target = root
			}
		}
		set_variable = je_bavarocracy_convert_button_var
	}

	ai_chance = {
        value = 5

		if = {
			limit = {
				je:je_bavarocracy ?= {
					"scripted_bar_progress(bavarocracy_progress_bar)" > 25
				}
			}
			add = 5
		}
		if = {
			limit = {
				je:je_bavarocracy ?= {
					"scripted_bar_progress(bavarocracy_progress_bar)" > 50
				}
			}
			add = 5
		}
    }
}
