# possible - filters out achivements on game start so we dont have to check everything all the time
# happened - checks if achivement happened

achievement_sugar_rush = {
	possible = {
		c:CUB ?= this
	}
	happened = {
		total_country_exports > je_cuba_la_vida_dulce_export_target
		market_capital.market = {
			mg:sugar = {
				market_goods_export_share >= 0.25
			}
		}
	}
}

achievement_spanish_lake = {
	possible = {
		has_dlc_feature = ip4_content
		OR = {
			c:SPA ?= this
			c:SPC ?= this
		}
	}
	happened = {
		custom_tooltip = {
			text = achievement_spanish_lake_tt
			has_variable = reconquista_achievement
		}
	}
}

achievement_a_las_barricadas = {
	possible = {
		OR = {
			c:SPA ?= this
			c:SPC ?= this
		}
	}
	happened = {
		custom_tooltip = {
			text = achievement_a_las_barricadas_tt
			has_global_variable = achievement_revolutionary
		}
		has_law_or_variant = law_type:law_anarchy
		has_law_or_variant = law_type:law_factory_councils
		has_law_or_variant = law_type:law_council_republic
		is_diplomatic_play_committed_participant = no
		is_at_war = no
	}
}

achievement_regeneration = {
	possible = {
		has_dlc_feature = ip4_content
		OR = {
			c:SPA ?= this
			c:SPC ?= this
			was_formed_from = SPA
		}
	}
	happened = {
		custom_tooltip = {
			text = achievement_regeneration_tt
			has_variable = je_spa_economic_regeneration_master_completed_var
			NOR = {
				has_variable = reduced_economic_objectives_var
				has_variable = je_spa_economic_regeneration_cheats_var
			}
		}
	}
}

achievement_deconquista = {
	possible = {
		OR = {
			country_has_state_religion = rel:sunni
			country_has_state_religion = rel:shiite
			country_has_state_religion = rel:ibadi
		}
	}
	happened = {
		custom_tooltip = {
			text = achievement_deconquista_tt
			c:SPA ?= {
				OR = {
					country_has_state_religion = rel:sunni
					country_has_state_religion = rel:shiite
					country_has_state_religion = rel:ibadi
				}
			}
		}
	}
}

achievement_the_most_united_kingdom = {
	possible = {
		has_dlc_feature = ip4_content
		c:POR ?= this
	}
	happened = {
		custom_tooltip = {
			text = achievement_personal_union_with_brazil_tt
			any_subject_or_below = {
				c:BRZ ?= this
				is_subject_type = subject_type_personal_union
				NOT = { has_journal_entry = je_pedro_brazil }
				has_law = law_type:law_monarchy
			}
		}
		custom_tooltip = {
			text = achievement_personal_union_with_spain_tt
			any_subject_or_below = {
				c:SPA ?= this
				is_subject_type = subject_type_personal_union
				has_law = law_type:law_monarchy
			}
		}
	}
}

achievement_one_more_time = {
	possible = {
		has_dlc_feature = ip4_content
		c:PHI ?= this
	}
	happened = {
		custom_tooltip = {
			text = achievement_one_more_time_tt
			has_variable = manila_cathedral_count
			var:manila_cathedral_count > 1
		}
	}
}

achievement_portugal_is_not_a_small_country = {
	possible = {
		c:POR ?= this
	}
	happened = {
		# see exile_character interaction
		custom_tooltip = {
			text = achievement_portugal_is_not_a_small_country_1_tt
			has_variable = achievement_portugal_is_not_a_small_country_states
		}
		custom_tooltip = {
			text = achievement_portugal_is_not_a_small_country_2_tt
			has_variable = achievement_portugal_is_not_a_small_country_angola_and_mozambique
		}
		custom_tooltip = {
			text = achievement_portugal_is_not_a_small_country_3_tt
			has_variable = achievement_portugal_is_not_a_small_country_connection
		}
	}
}

achievement_unanimity = {
	happened = {
		custom_tooltip = {
			text = achievement_unanimity_tt
			has_variable = unanimity_achievement_var
		}
	}
}

achievement_full_circle = {
	possible = {
		has_dlc_feature = ip4_content
		has_variable = full_circle_ach_possible
	}
	happened = {
		custom_tooltip = {
			text = had_glorious_revolution_tt
			has_variable = glorious_revolution_var
		}
		ruler ?= {
			has_ideology = ideology:ideology_carlist
		}
	}
}
