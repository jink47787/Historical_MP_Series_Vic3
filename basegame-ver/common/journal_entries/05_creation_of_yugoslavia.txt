je_yugoslavia = {
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	group = je_group_historical_content

	is_shown_when_inactive = {
		has_dlc_feature = ip3_content
		has_technology_researched = nationalism
		OR = {
			country_has_primary_culture = cu:croat
			country_has_primary_culture = cu:serb
			country_has_primary_culture = cu:slovene
			country_has_primary_culture = cu:bosniak
			AND = {
				has_variable = bul_pursued_greater_yugoslavism
				country_has_primary_culture = cu:bulgarian
			}
		}
		OR = {
			is_subject = no
			aggressive_diplomatic_plays_permitted = yes
		}
		NOT = { has_variable = je_yugoslavia_happened }
		NOR = { # not Danubian State
			c:KUK ?= this
			has_journal_entry = je_danubian_federation
		}
	}

	possible = {
		has_technology_researched = pan-nationalism
		is_subject = no
		OR = {
			country_has_primary_culture = cu:croat
			country_has_primary_culture = cu:serb
			country_has_primary_culture = cu:slovene
			country_has_primary_culture = cu:bosniak
			AND = {
				hidden_trigger = {
					has_variable = bul_pursued_greater_yugoslavism
				}
				country_has_primary_culture = cu:bulgarian
			}
		}
	}

	immediate = {
		root = {
			save_scope_as = root_country_scope
		}
		cu:croat = {
			save_scope_as = croatian_scope
		}
		cu:serb = {
			save_scope_as = serbian_scope
		}
		cu:slovene = {
			save_scope_as = slovene_scope
		}
		cu:bosniak = {
			save_scope_as = bosniak_scope
		}
		set_variable = je_yugoslavia_is_active
		trigger_event = {
			id = yugoslavia.1
			popup = yes
		}
	}

	complete = {
		custom_tooltip = { # happens via major formables
			text = is_yugoslavia_tt
			c:YUG ?= this
		}
		government_legitimacy >= 50
		is_at_war = no
		custom_tooltip = {
            text = no_insurrectionary_movement_tt
            NOT = {
                any_political_movement = {
                    is_insurrectionary = yes
                }
            }
        }
	}

	on_monthly_pulse = {

	}

	on_complete = {
		hidden_effect = {
			set_variable = je_yugoslavia_happened
		}
		trigger_event = {
			id = yugoslavia.2
			days = 1
			popup = yes
		}
	}

	event_outcome_completed_desc = {
	     first_valid = {
	         triggered_desc = {
	             desc = event_effects_yugoslavia.2_tt
	         }
	     }
	}

	fail = {
		is_subject = yes
	}

	on_fail = {
		hidden_effect = {
			set_variable = {
				name = je_yugoslavia_happened
				days = long_modifier_time
			}
		}
		post_notification = yugoslavia_failed_message
	}

	invalid = {
		ROOT = {
			OR  = {
				NOR = {
					country_has_primary_culture = cu:croat
					country_has_primary_culture = cu:serb
					country_has_primary_culture = cu:slovene
					country_has_primary_culture = cu:bosniak
					country_has_primary_culture = cu:bulgarian
				}
				c:KUK ?= this
				has_journal_entry = je_danubian_federation
			}
		}
	}

	weight = 100

	can_revolution_inherit = yes
	should_be_pinned_by_default = yes
}
