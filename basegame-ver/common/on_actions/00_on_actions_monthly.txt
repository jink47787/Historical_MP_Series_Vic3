# Fired off on_monthly_pulse_country

# Regency switch event
regency_monthly_events = {
	random_events = {
		chance_to_happen = 20
		1 = regency.2
	}
}

# Coup
coup_monthly_events = {
	random_events = {
		# If someone can do a coup, they will
		chance_to_happen = 50
		1 = ip4_coup.1
	}
}

# Garibaldi
garibaldi_monthly_events = {
	random_events = {
		chance_to_happen = 30
		30 = garibaldi_events.1
		30 = garibaldi_events.2
		2 = garibaldi_events.3
		1 = garibaldi_events.4
	}
}

# Fund Lobbies Events
fund_lobbies_monthly_events = {
	random_events = {
		chance_to_happen = 25
		10 = fund_lobbies_events.1
		10 = fund_lobbies_events.2
		10 = fund_lobbies_events.3
		10 = fund_lobbies_events.4
		10 = fund_lobbies_events.5
	}
}

# Halloween Events
spooky_halloween_events = {
	random_events = {
		chance_to_happen = 10
		5 = spooky_halloween_events.1
		5 = spooky_halloween_events.2
		5 = spooky_halloween_events.3
		5 = spooky_halloween_events.4
		5 = spooky_halloween_events.5
		5 = spooky_halloween_events.6
	}
}

# Sweden Events
sweden_events = {
	random_events = {
		chance_to_happen = 20
		10 = sweden_migration.1
		10 = sweden_law.1
	}
}

tech_monthly_events = {
	random_events = {
		chance_to_happen = 50
		10 = flamethrowers_event.1
		10 = naval_tech_events.1
		10 = naval_tech_events.2
		10 = naval_tech_events.3
		10 = military_tech_events.401
		10 = military_tech_events.402
		10 = military_tech_events.403
		10 = military_tech_events.404
		10 = aviation.1
		10 = trench_warfare.1
		10 = naval_tech_events.4
		10 = naval_tech_events.5
		10 = society_tech_events.301
		10 = dan_society_tech_events.1
		10 = production_tech_events.1
		10 = production_tech_events.600
		10 = production_tech_events.601
		10 = production_tech_events.200
		10 = production_tech_events.210
		10 = production_tech_events.102
		10 = production_tech_events.103
		10 = production_tech_events.501
		10 = production_tech_events.300
		10 = production_tech_events.301
		10 = production_tech_events.401
		10 = production_tech_events.402
		10 = production_tech_events.700
		10 = production_tech_events.700
		10 = production_tech_events.700
		10 = society_tech_events.104
		10 = society_tech_events.105
		10 = metro.1
		10 = dt_society_events.1
		10 = dt_society_events.3
		10 = war_crimes.1
		10 = war_crimes.2
	}
}

# je_krakatoa
krakatoa_on_action = {
	trigger = {
		any_scope_state = {
			devastation > 0
			has_decree = decree_emergency_relief
			state_region = { has_variable = is_tsunami_state }
		}
	}
	effect = {
		random = {
			chance = krakatoa_decree_emergency_relief_devastation_recovery_chance

			random_scope_state = {
				limit = {
					devastation > 0
					has_decree = decree_emergency_relief
					state_region = { has_variable = is_tsunami_state }
				}
				state_region = { add_devastation = krakatoa_decree_emergency_relief_devastation_recovery_amount }
			}
		}
	}
}

exile_pool_culling_on_action = {
	trigger = {
		any_character_in_exile_pool = {
			count > {
				value = exile_pool_max_size
				add = 10
			}
		}
	}
	effect = {
		save_temporary_scope_value_as = {
			name = exile_pool_size
			value = {
				add = 0
				every_character_in_exile_pool = {
					add = 1
				}
			}
		}
		ordered_character_in_exile_pool = {
			limit = {
				is_historical = no # Only consider culling historical characters if there arent generic ones we can remove
			}
			alternative_limit = {
				NOT = { has_variable = exile_pool_culling_immunity }
			}
			order_by = {
				value = popularity
				multiply = -1
			}
			max = {
				add = scope:exile_pool_size
				subtract = exile_pool_max_size
			}

			kill_character = yes
		}
	}
}
