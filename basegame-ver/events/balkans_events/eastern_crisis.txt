namespace = eastern_crisis

# start event for je_great_eastern_crisis
eastern_crisis.1 = {
	type = country_event
	placement = root

	duration = 3

	title = eastern_crisis.1.t
	desc = {
		first_valid = {
			triggered_desc = { # for c:TUR
				trigger = {
					c:TUR ?= this
				}
				desc = eastern_crisis.1.d
			}
			triggered_desc = { # for other nations in sr:region_balkans
				trigger = {
					NOT = {
						c:TUR ?= this
					}
					always = yes
				}
				desc = eastern_crisis.1.d2
			}
		}
	}
	flavor = eastern_crisis.1.f

	event_image = {
		video = "middleeast_courtroom_upheaval"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	cooldown = { days = very_long_modifier_time }

	trigger = {
		# triggered by je_great_eastern_crisis
	}

	immediate = {
		c:TUR ?= {
			random_scope_state = {
				limit = {
					is_capital = yes
				}
				save_scope_as = relevant_state_scope
			}
			ruler = {
				save_scope_as = ruler_scope
			}
			save_scope_as = ottoman_scope
		}
	}

	cancellation_trigger = {
		c:TUR ?= {
			NOT = {
				has_journal_entry = je_great_eastern_crisis
			}
		}
	}

	option = {
		name = eastern_crisis.1.a
		default_option = yes
		show_as_tooltip = { #Actual modifiers are tied to the respective countries' JEs, so they timeout correctly.
			if = {
				limit = {
					any_country = {
						has_subject_relation_with = c:TUR
					}
				}
				custom_tooltip = {
					text = eastern_crisis_subjects_modifier_tt
				}
			}
			c:TUR ?= {
				add_modifier = {
					name = negative_crisis_influence
					days = long_modifier_time
				}
				if = { #modifier for movements.
					limit = {
						any_political_movement = {
							OR = {
								is_political_movement_type = movement_religious_majority
								is_political_movement_type = movement_religious_minority
								is_political_movement_type = movement_cultural_majority
								is_political_movement_type = movement_cultural_minority
							}
						}
					}
					every_political_movement = {
						limit = {
							OR = {
								is_political_movement_type = movement_religious_majority
								is_political_movement_type = movement_religious_minority
								is_political_movement_type = movement_cultural_majority
								is_political_movement_type = movement_cultural_minority
							}
						}
						add_modifier = {
							name = eastern_crisis_movement_attraction
							days = long_modifier_time
						}
					}
				}
			}
			c:RUS ?= {
				add_modifier = {
					name = positive_crisis_influence
					days = long_modifier_time
				}
			}
			c:AUS ?= {
				add_modifier = {
					name = positive_crisis_influence
					days = long_modifier_time
				}
			}
		}
	}
}

# completion event for je_great_eastern_crisis
eastern_crisis.2 = {
	type = country_event
	placement = root

	duration = 3

	title = eastern_crisis.2.t
	desc = eastern_crisis.2.d
	flavor = eastern_crisis.2.f

	event_image = {
		video = "middleeast_upperclass_party"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	cooldown = { days = very_long_modifier_time }

	trigger = {
		# triggered by je_great_eastern_crisis
	}

	immediate = {
		c:TUR ?= {
			random_scope_state = {
				limit = {
					is_capital = yes
				}
				save_scope_as = relevant_state_scope
			}
			ruler = {
				save_scope_as = ruler_scope
			}
			save_scope_as = ottoman_scope
		}
	}

	cancellation_trigger = {
	}

	option = { #Do the effects if this is c:TUR, otherwise merely show the effects as tooltip
		name = eastern_crisis.2.a
		default_option = yes
		if = {
			limit = {
				c:TUR ?= root
			}
			eastern_crisis_2_event_effects = yes
		}
		else = {
			show_as_tooltip = {
				eastern_crisis_2_event_effects = yes
			}
		}
	}
}

# timeout event for je_great_eastern_crisis
eastern_crisis.3 = {
	type = country_event
	placement = root

	duration = 3

	title = eastern_crisis.3.t
	desc = eastern_crisis.3.d
	flavor = eastern_crisis.3.f

	event_image = {
		video = "ip3_angry_mob_raiding_minorities"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	cooldown = { days = very_long_modifier_time }

	trigger = {
		# triggered by je_great_eastern_crisis
	}

	immediate = {
		c:TUR ?= {
			random_scope_state = {
				limit = {
					is_capital = yes
				}
				save_scope_as = relevant_state_scope
			}
			ruler = {
				save_scope_as = ruler_scope
			}
			save_scope_as = ottoman_scope
		}
	}

	cancellation_trigger = {

	}

	option = { #Do the effects if this is c:TUR, otherwise merely show the effects as tooltip
		name = eastern_crisis.3.a
		default_option = yes
		if = {
			limit = {
				c:TUR ?= root
			}
			eastern_crisis_3_event_effects = yes
		}
		else = {
			show_as_tooltip = {
				eastern_crisis_3_event_effects = yes
			}
		}
	}
}
