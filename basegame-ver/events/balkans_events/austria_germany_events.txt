namespace = austria_germany

austria_germany.1 = {
	type = country_event
	placement = root
	title = austria_germany.1.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = austria_germany.1.d
				trigger = {
					has_law_or_variant = law_type:law_subjecthood
				}
			}
			triggered_desc = {
				desc = austria_germany.1.d1
				trigger = {
					NOT = {
						has_law_or_variant = law_type:law_subjecthood
					}
				}
			}
		}
	}
	flavor = austria_germany.1.f
	duration = 3
	event_image = {
		video = "ip3_angry_mob_raiding_minorities"
	}
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	trigger = {
		# Triggered by forming Germany
	}

	cancellation_trigger = {

	}

	immediate = {
		ordered_country = {
			limit = {
				NOT = {
					this = root
				}
			}
			order_by = country_rank
			save_scope_as = top_great_power
		}
	}

	option = { # Release independent states.
		name = austria_germany.1.b
		default_option = yes
		ai_chance = {
			base = 100
		}
		release_greater_germany_nations = yes
		custom_tooltip = austria_germany_warning_2_tt
		every_country = {
			limit = {
				country_rank >= rank_value:great_power
				NOT = { THIS = ROOT }
			}
			change_relations = {
				country = ROOT
				value = -10
			}
		}
	}

	option = { # Release subjects.
		name = austria_germany.1.a
		default_option = yes
		ai_chance = {
			base = 100
		}
		release_greater_germany_puppets = yes
		custom_tooltip = austria_germany_warning_2_tt
		create_incident = {
			country = scope:top_great_power
			value = 30
		}
		every_country = {
			limit = {
				country_rank >= rank_value:great_power
				NOT = { THIS = ROOT }
			}
			change_relations = {
				country = ROOT
				value = -20
			}
		}
	}

	option = { # We love Super Germany.
		name = austria_germany.1.c
		ai_chance = {
			base = 20
		}
		if = {
			limit = {
				has_law_or_variant = law_type:law_subjecthood
			}
			add_radicals = {
				value = very_large_radicals
				culture = cu:north_german
			}
			add_radicals = {
				value = medium_radicals
				culture = cu:south_german
			}
		}
		else = {
			every_scope_culture = {
				limit = {
					NOT = {
						has_discrimination_trait = language_germanophone
					}
					ROOT = {
						"culture_percent_country(prev)" > 0.02
					}
				}
				ROOT = {
					add_radicals = {
						value = very_large_radicals
						culture = prev
					}
				}
			}
		}
		custom_tooltip = austria_germany_warning_tt
		create_incident = {
			country = scope:top_great_power
			value = 50
		}
		every_country = {
			limit = {
				country_rank >= rank_value:great_power
				NOT = { THIS = ROOT }
			}
			change_relations = {
				country = ROOT
				value = -30
			}
		}
	}
}
