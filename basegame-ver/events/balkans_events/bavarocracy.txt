namespace = bavarocracy_events

bavarocracy_events.1 = {
	type = country_event
	event_image = {
		video = "votp_monarch_holding_court"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	title = bavarocracy_events.1.t
	desc = bavarocracy_events.1.d
	flavor = bavarocracy_events.1.f

	trigger = {
		# Triggered by JE
	}

	immediate = {
	}

	duration = 3

	option = {
		name = bavarocracy_events.1.a
        default_option = yes
        add_modifier = {
        	name = modifier_ottonian_renaissance
        	days = long_modifier_time
        }
        ruler = {
	        if = {
	        	limit = {
	        		has_trait = inexperienced
	        	}
	        	remove_trait = inexperienced
	        }
	        if = {
	        	limit = {
	        		has_trait = political_appointee
	        	}
	        	remove_trait = political_appointee
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = erudite
	        		}
	        	}
	        	add_trait = erudite
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = basic_political_operator
	        		}
	        	}
	        	add_trait = basic_political_operator
	        }
	    }
	    if = {
	    	limit = {
	    		has_law_or_variant = law_type:law_autocracy
	    	}
	    	custom_tooltip = bavarocracy_events.1.tt_1
	    	add_modifier = {
	    		name = modifier_bavarocracy_autocratic
	    		days = long_modifier_time
	    	}
	    }
	    else_if = {
	    	limit = {
	    		country_has_voting_franchise = yes
	    	}
	    	custom_tooltip = bavarocracy_events.1.tt_2  
	    	add_modifier = {
	    		name = modifier_bavarocracy_democratic
	    		days = long_modifier_time
	    	}
	    }
	}

    option = {
		name = bavarocracy_events.1.b
		add_modifier = {
			name = modifier_ottonian_reforms
			days = long_modifier_time
		}
        ruler = {
	        if = {
	        	limit = {
	        		has_trait = inexperienced
	        	}
	        	remove_trait = inexperienced
	        }
	        if = {
	        	limit = {
	        		has_trait = political_appointee
	        	}
	        	remove_trait = political_appointee
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = celebrity_commander
	        		}
	        	}
	        	add_trait = celebrity_commander
	        }
	        if = {
	        	limit = {
	        		NOT = {
	        			has_trait = basic_offensive_planner
	        		}
	        	}
	        	add_trait = basic_offensive_planner
	        }
	    }
	    if = {
	    	limit = {
	    		has_law_or_variant = law_type:law_autocracy
	    	}
	    	custom_tooltip = bavarocracy_events.1.tt_1
	    	add_modifier = {
	    		name = modifier_bavarocracy_autocratic
	    		days = long_modifier_time
	    	}
	    }
	    else_if = {
	    	limit = {
	    		country_has_voting_franchise = yes
	    	}
	    	custom_tooltip = bavarocracy_events.1.tt_2  
	    	add_modifier = {
	    		name = modifier_bavarocracy_democratic
	    		days = long_modifier_time
	    	}
	    }
	}
}

bavarocracy_events.2 = {
	type = country_event
	event_image = {
		video = "votp_gunboat_diplomacy"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	title = bavarocracy_events.2.t
	desc = bavarocracy_events.2.d
	flavor = bavarocracy_events.2.f

	trigger = {
		# Triggered by JE
	}

	immediate = {
	}

	duration = 3

	option = {
		name = bavarocracy_events.2.a
		default_option = yes
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_danish_tt
        	if = {
        		limit = {
        			year > 1845
        			year < 1910
        		}
				create_character = {
					template = GRE_george_i_of_greece
				}
        	}
        	else = {
				create_character = {
					first_name = George
					last_name = of_Glucksburg
					noble = yes
					culture = cu:danish
					interest_group = ig_landowners
					ideology = ideology_reformer
					age = default
					ruler = yes
				}
        	}
        }
        every_country = {
        	limit = {
	        	has_law_or_variant = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}	
	        }
	        root = {
				change_relations = {
					country = prev
					value = 10
				}
			}
        }
		change_relations = {
			country = c:DEN
			value = 30
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:DEN
		}
	}

    option = {
		name = bavarocracy_events.2.b
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
		activate_law = law_type:law_presidential_republic
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
			}
			add_modifier = {
				name = modifier_an_inconvenient_republic
				days = normal_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_presidential_republic
					value < neutral
				}
			}
			add_modifier = {
				name = modifier_architects_of_the_second_republic
				days = normal_modifier_time
			}
		}
        every_country = {
        	limit = {
	        	has_law_or_variant = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}	
	        }
	        root = {
				change_relations = {
					country = prev
					value = -10
				}
			}
        }
	}

    option = {
		name = bavarocracy_events.2.c
    	highlighted_option = yes
    	trigger = {
	    	c:GBR ?= {
	    		owes_obligation_to = root
	    		has_law_or_variant = law_type:law_monarchy
	    	}
    	}
    	c:GBR = { 
    		set_owes_obligation_to = { 
    			country = root 
    			setting = no 
    		} 
    	}
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_british_tt
			create_character = {
				first_name = George
				last_name = of_Saxe-Coburg-Gotha
				noble = yes
				culture = cu:british
				interest_group = ig_landowners
				ideology = ideology_market_liberal
				age = default
				ruler = yes
			}
        }
		change_relations = {
			country = c:GBR
			value = 30
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:GBR
		}
	}

    option = {
    	name = bavarocracy_events.2.e
    	highlighted_option = yes
    	trigger = {
	    	c:FRA ?= {
	    		owes_obligation_to = root
	    		has_law_or_variant = law_type:law_monarchy
	    	}
    	}
    	c:FRA = { 
    		set_owes_obligation_to = { 
    			country = root 
    			setting = no 
    		} 
    	}
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
		if = {
			limit = {
				c:FRA = {
					ruler = {
						NOR = {
							has_variable = legitimist_leader
							has_variable = orleanist_leader
							has_variable = bonapartist_leader
						}
					}
				}
			}
	        custom_tooltip = {
	        	text = bavarocracy_prince_french_tt
	        }
	    }
		if = {
			limit = {
				c:FRA = {
					ruler = {
						has_variable = legitimist_leader
					}
				}
			}
	        custom_tooltip = {
	        	text = bavarocracy_prince_french_bourbon_tt
				create_character = {
					first_name = George
					last_name = de_Bourbon
					noble = yes
					culture = cu:french
					interest_group = ig_landowners
					ideology = ideology_traditionalist
					age = default
					ruler = yes
				}
			}
		}
		if = {
			limit = {
				c:FRA = {
					ruler = {
						has_variable = orleanist_leader
					}
				}
			}
	        custom_tooltip = {
	        	text = bavarocracy_prince_french_orleans_tt
				create_character = {
					first_name = George
					last_name = d_Orleans
					noble = yes
					culture = cu:french
					interest_group = ig_industrialists
					ideology = ideology_market_liberal
					age = default
					ruler = yes
				}
			}
		}
		if = {
			limit = {
				c:FRA = {
					ruler = {
						has_variable = bonapartist_leader
					}
				}
			}
	        custom_tooltip = {
	        	text = bavarocracy_prince_french_bonaparte_tt
				create_character = {
					first_name = George
					last_name = Bonaparte
					noble = yes
					culture = cu:french
					interest_group = ig_armed_forces
					ideology = ideology_reformer
					age = default
					ruler = yes
				}
			}
		}
		change_relations = {
			country = c:FRA
			value = 30
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:FRA
		}
	}

    option = {
		name = bavarocracy_events.2.g
    	highlighted_option = yes
    	trigger = {
	    	c:RUS ?= {
	    		owes_obligation_to = root
	    		has_law_or_variant = law_type:law_monarchy
	    	}
    	}
    	c:RUS = { 
    		set_owes_obligation_to = { 
    			country = root 
    			setting = no 
    		} 
    	}
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_russian_tt
			create_character = {
				first_name = George
				last_name = Romanov
				noble = yes
				culture = cu:russian
				interest_group = ig_landowners
				ideology = ideology_royalist
				age = default
				ruler = yes
			}
        }
		change_relations = {
			country = c:RUS
			value = 30
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:RUS
		}
	}

#    option = {
#		name = bavarocracy_events.2.h
#	}

    option = {	
		name = bavarocracy_events.2.i
		highlighted_option = yes
    	trigger = {
    		any_scope_character = {
    			has_template = garibaldi_character_template
    		}
    	}
        custom_tooltip = {
        	text = bavarocracy_expell_tt
        	every_scope_character = {
        		limit = {
	        		OR = {
	        			is_ruler = yes
	        			is_heir = yes
	        			culture = cu:south_german
	        		}
	        	}
				kill_character = {
					hidden = yes
				}
        	}
		}
        custom_tooltip = {
        	text = bavarocracy_prince_garibaldi_tt
	        random_scope_character = {
	        	limit = {
	        		has_template = garibaldi_character_template
	        	}
	        	set_character_as_ruler = yes
	        }
        }

        every_country = {
        	limit = {
	        	has_law_or_variant = law_type:law_monarchy
	        	country_rank >= rank_value:great_power
	        	NOT = {
	        		root = this
	        	}	
	        }
	        root = {
				change_relations = {
					country = prev
					value = -30
				}
			}
        }
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_monarchy
					value > neutral
				}
			}
			add_modifier = {
				name = modifier_revolutionary_king
				days = normal_modifier_time
			}
		}
		every_interest_group = {
			limit = {
				law_stance = {
					law = law_type:law_presidential_republic
					value < neutral
				}
			}
			add_modifier = {
				name = modifier_architects_of_the_second_republic
				days = normal_modifier_time
			}
		}
	}
}
