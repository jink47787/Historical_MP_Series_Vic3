namespace = portuguese_colonialism

portuguese_colonialism.1 = { # Initiation
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.1.t
	desc = portuguese_colonialism.1.d
	flavor = portuguese_colonialism.1.f

	event_image = {
		video = "unspecific_steam_ship"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	immediate = {
		random_state = {
			limit = {
				owner = {
					OR = {
						this = ROOT
						AND = {
							country_is_colonial_or_company = yes
							is_subject_of = ROOT
						}
					}
				}
				OR = {
					is_in_geographic_region = geographic_region_angola
					is_in_geographic_region = geographic_region_mozambique
				}
				is_split_state = no
			}
			save_scope_as = colony_state_scope
		}
	}

	cancellation_trigger = {
		is_subject = yes
	}

	cooldown = {
		days = stupidly_long_modifier_time
	}

	option = {
		name = portuguese_colonialism.1.a
		default_option = yes
		show_as_tooltip = {
			add_journal_entry = {
				type = je_portuguese_colonialism
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_EAST_ANGOLA
				}
			}
			s:STATE_EAST_ANGOLA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_NORTH_ANGOLA
				}
			}
			s:STATE_NORTH_ANGOLA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_SOUTH_ANGOLA
				}
			}
			s:STATE_SOUTH_ANGOLA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_LOURENCO_MARQUES
				}
			}
			s:STATE_LOURENCO_MARQUES = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_ZAMBEZIA
				}
			}
			s:STATE_ZAMBEZIA = {
				add_claim = ROOT
			}
		}
		if = {
			limit = {
				NOT = {
					has_claim = s:STATE_MOCAMBIQUE
				}
			}
			s:STATE_MOCAMBIQUE = {
				add_claim = ROOT
			}
		}
	}
	option = {
		name = portuguese_colonialism.1.b
		custom_tooltip = {
			text = portuguese_colonialism.1.b_tt
			set_variable = rejected_colonialism_ambitions_var
		}
		every_interest_group = {
			limit = {
				OR = {
					law_stance = {
						law = law_type:law_colonial_resettlement
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_exploitation
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_slavery
						value > neutral
					}
				}
			}
			add_modifier = {
				name = modifier_portuguese_colonialism_refused
				days = short_modifier_time
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_EAST_ANGOLA
			}
			s:STATE_EAST_ANGOLA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_NORTH_ANGOLA
			}
			s:STATE_NORTH_ANGOLA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_SOUTH_ANGOLA
			}
			s:STATE_SOUTH_ANGOLA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_LOURENCO_MARQUES
			}
			s:STATE_LOURENCO_MARQUES = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_ZAMBEZIA
			}
			s:STATE_ZAMBEZIA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_MOCAMBIQUE
			}
			s:STATE_MOCAMBIQUE = {
				remove_claim = ROOT
			}
		}
	}
}

portuguese_colonialism.2 = { # Complete
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.2.t
	desc = portuguese_colonialism.2.d
	flavor = portuguese_colonialism.2.f

	event_image = {
		video = "votp_garibaldi"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ROOT = {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.2.a
		default_option = yes
		if = {
			limit = {
				exists = c:GBR
				OR = {
					c:POR ?= ROOT
					c:IBE ?= ROOT
				}
				is_subject = no
				NOT = {
					has_variable = pink_map_sent
				}
				has_variable = portuguese_colonialism_je_completed
			}
			custom_tooltip = portuguese_colonialism.2.the_pink_map_tt
		}
		every_subject_or_below = {
			every_scope_state = {
				limit = {
					OR = {
						state_region = s:STATE_EAST_ANGOLA
						state_region = s:STATE_NORTH_ANGOLA
						state_region = s:STATE_SOUTH_ANGOLA
						state_region = s:STATE_LOURENCO_MARQUES
						state_region = s:STATE_ZAMBEZIA
						state_region = s:STATE_MOCAMBIQUE
					}
				}
				add_modifier = {
					name = portuguese_colonialism_populate_colonies_mod
					days = normal_modifier_time
				}
			}
		}
		every_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_EAST_ANGOLA
					state_region = s:STATE_NORTH_ANGOLA
					state_region = s:STATE_SOUTH_ANGOLA
					state_region = s:STATE_LOURENCO_MARQUES
					state_region = s:STATE_ZAMBEZIA
					state_region = s:STATE_MOCAMBIQUE
				}
			}
			add_modifier = {
				name = portuguese_colonialism_populate_distant_state_mod
				days = normal_modifier_time
			}
		}
	}
	option = {
		name = portuguese_colonialism.2.b
		custom_tooltip = portuguese_colonialism.2.the_pink_map_tt
		add_modifier = {
			name = portuguese_colonialism_ig_approval_mod
			days = normal_modifier_time
		}
	}
	option = {
		name = portuguese_colonialism.2.c
		custom_tooltip = portuguese_colonialism.2.the_pink_map_tt
		add_modifier = {
			name = portuguese_colonialism_prestige_mod
			days = normal_modifier_time
		}
	}
}

portuguese_colonialism.3 = { # Fail
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.3.t
	desc = portuguese_colonialism.3.d
	flavor = portuguese_colonialism.3.f

	event_image = {
		video = "africa_animism"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {

	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.3.a
		default_option = yes
		add_modifier = {
			name = portuguese_colonialism_failed_mod
			days = long_modifier_time
		}
	}
	option = {
		name = portuguese_colonialism.3.b
		add_modifier = {
			name = portuguese_colonialism_failed_with_ambition_mod
			days = long_modifier_time
		}
	}
}

portuguese_colonialism.4 = { # Pink Map GBR: A stance has to be made
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.4.t
	desc = portuguese_colonialism.4.d
	flavor = portuguese_colonialism.4.f

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	immediate = {
		random_country = {
			limit = {
				has_variable = pink_map_seeking
			}
			save_scope_as = por_scope
		}
		if = {
			limit = {
				exists = c:SAF
			}
			c:SAF.top_overlord ?= {
				save_scope_as = gbr_scope
			}
		}
		else = {
			c:GBR ?= {
				save_scope_as = gbr_scope
			}
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.4.a
		custom_tooltip = {
			text = portuguese_colonialism.4.a_tt
			scope:por_scope ?= {
				trigger_event = portuguese_colonialism.5
			}
		}
		show_as_tooltip = {
			scope:por_scope ?= {
				change_relations = {
					country = scope:gbr_scope
					value = 15
				}
			}
			custom_tooltip = might_get_additional_rewards_tt
		}
	}
	option = {
		name = portuguese_colonialism.4.b
		default_option = yes
		custom_tooltip = {
			text = portuguese_colonialism.4.b_tt
			scope:por_scope ?= {
				trigger_event = portuguese_colonialism.10
			}
		}
	}
	option = {
		name = portuguese_colonialism.4.c
		custom_tooltip = {
			text = portuguese_colonialism.4.c_tt
			scope:por_scope ?= {
				trigger_event = portuguese_colonialism.6
			}
		}
	}
}

portuguese_colonialism.5 = { # Pink Map POR: GBR Accepted, Pink Map JE starts
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.5.t
	desc = portuguese_colonialism.5.d
	flavor = portuguese_colonialism.5.f

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	immediate = {
		if = {
			limit = {
				exists = c:SAF
			}
			c:SAF.top_overlord ?= {
				save_scope_as = gbr_scope
			}
		}
		else = {
			c:GBR ?= {
				save_scope_as = gbr_scope
			}
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.5.a
		default_option = yes
		change_relations = {
			country = scope:gbr_scope
			value = 15
		}
		add_journal_entry = {
			type = je_the_pink_map
		}
		s:STATE_KAZEMBE = {
			add_claim = ROOT
		}
		s:STATE_ZAMBIA = {
			add_claim = ROOT
		}
		s:STATE_ZAMBEZI = {
			add_claim = ROOT
		}
	}
	option = {
		name = portuguese_colonialism.5.b
		custom_tooltip = {
			text = portuguese_colonialism.5.b_tt
			c:GBR ?= {
				post_notification = pink_map_britain_accepts_with_gift
				add_modifier = {
					name = gbr_receives_gift_from_portugal_for_approval_mod
					days = normal_modifier_time
				}
			}
			change_relations = {
				country = scope:gbr_scope
				value = 30
			}
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_positive
			target = c:GBR
		}
		add_journal_entry = {
			type = je_the_pink_map
		}
		s:STATE_KAZEMBE = {
			add_claim = ROOT
		}
		s:STATE_ZAMBIA = {
			add_claim = ROOT
		}
		s:STATE_ZAMBEZI = {
			add_claim = ROOT
		}
		add_modifier = {
			name = portuguese_sends_gbr_gift_for_approval_mod
			days = short_modifier_time
		}
	}
}

portuguese_colonialism.6 = { # Pink Map POR: GBR Rejected, what is our response?
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.6.t
	desc = portuguese_colonialism.6.d
	flavor = portuguese_colonialism.6.f

	event_image = {
		video = "ep1_printing_press"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	immediate = {
		if = {
			limit = {
				exists = c:SAF
			}
			c:SAF.top_overlord ?= {
				save_scope_as = gbr_scope
			}
		}
		else = {
			c:GBR ?= {
				save_scope_as = gbr_scope
			}
		}
		ROOT = {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.6.a
		default_option = yes
		custom_tooltip = {
			text = portuguese_colonialism.6.a_tt
			scope:gbr_scope ?= {
				post_notification = pink_map_britain_portugal_backs_down
				add_modifier = {
					name = portuguese_colonialism_gbr_forces_por_to_back_down_mod
					days = normal_modifier_time
				}
			}
		}
		scope:gbr_scope = {
			change_relations = {
				country = scope:por_scope
				value = 20
			}
		}
		add_modifier = {
			name = portuguese_backs_down_from_pursuing_the_pink_map_mod
			days = long_modifier_time
		}
		every_interest_group = {
			limit = {
				OR = {
					law_stance = {
						law = law_type:law_colonial_resettlement
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_exploitation
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_slavery
						value > neutral
					}
				}
			}
			add_modifier = {
				name = portuguese_refuses_to_back_down_from_pursuing_the_pink_map_ig_mod
				days = normal_modifier_time
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_KAZEMBE
			}
			s:STATE_KAZEMBE = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_ZAMBIA
			}
			s:STATE_ZAMBIA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_ZAMBEZI
			}
			s:STATE_ZAMBEZI = {
				remove_claim = ROOT
			}
		}
	}
	option = {
		name = portuguese_colonialism.6.b
		custom_tooltip = portuguese_colonialism.6.b_tt
		add_journal_entry = {
			type = je_the_pink_map
		}
		hidden_effect = {
			set_variable = por_ignored_gbr_var
		}
		add_modifier = {
			name = portuguese_insists_on_pink_map_mod
			days = long_modifier_time
		}
		change_infamy = 25
		s:STATE_KAZEMBE = {
			add_claim = ROOT
		}
		s:STATE_ZAMBIA = {
			add_claim = ROOT
		}
		s:STATE_ZAMBEZI = {
			add_claim = ROOT
		}
		hidden_effect = {
			c:GBR ?= {
				post_notification = pink_map_britain_portugal_intractable
				add_modifier = {
					name = portuguese_refuses_to_back_down_from_pursuing_the_pink_map_mod
					days = short_modifier_time
				}
				change_relations = {
					country = scope:por_scope
					value = -20
				}
			}
		}
		create_diplomatic_catalyst = {
			type = catalyst_event_negative
			target = c:GBR
		}
	}
}

portuguese_colonialism.8 = { # Pink Map JE Complete
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.8.t
	desc = portuguese_colonialism.8.d
	flavor = portuguese_colonialism.8.f

	event_image = {
		video = "ip4_colonial_exploitation_going_well"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		ROOT = {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.8.a
		default_option = yes
		add_modifier = {
			name = portuguese_successful_pink_map_campaign_mod
			days = very_long_modifier_time
		}
		ruler = {
			interest_group = {
				add_modifier = {
					name = portuguese_ruler_ig_successful_pink_map_campaign_mod
					days = very_long_modifier_time
				}
			}
		}
	}
	option = {
		trigger = {
			ruler = {
				has_trait = arrogant
			}
		}
		name = portuguese_colonialism.8.b
		add_modifier = {
			name = portuguese_successful_pink_map_campaign_mod
			days = very_long_modifier_time
		}
		ruler = {
			add_modifier = {
				name = portuguese_arrogant_ruler_successful_pink_map_campaign_mod
				days = very_long_modifier_time
			}
		}
	}
}

portuguese_colonialism.9 = { # Pink Map JE Failed
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.9.t
	desc = portuguese_colonialism.9.d
	flavor = portuguese_colonialism.9.f

	event_image = {
		video = "africa_construction_colony"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		ig:ig_armed_forces = {
			save_scope_as = armed_forces_scope
		}
		ROOT = {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.9.a
		default_option = yes
		add_modifier = {
			name = portuguese_failed_pink_map_campaign_mod
			days = long_modifier_time
		}
	}
	option = {
		name = portuguese_colonialism.9.b
		add_modifier = {
			name = portuguese_failed_armed_forces_blamed_pink_map_campaign_mod
			days = long_modifier_time
		}
		ig:ig_armed_forces = {
			add_modifier = {
				name = portuguese_failed_armed_forces_pink_map_campaign_mod
				days = long_modifier_time
			}
		}
	}
}

portuguese_colonialism.10 = { # Pink Map POR: GBR Accepted, but wants a favor
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.10.t
	desc = portuguese_colonialism.10.d
	flavor = portuguese_colonialism.10.f

	event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	immediate = {
		if = {
			limit = {
				exists = c:SAF
			}
			c:SAF.top_overlord ?= {
				save_scope_as = gbr_scope
			}
		}
		else = {
			c:GBR ?= {
				save_scope_as = gbr_scope
			}
		}
		ROOT ?= {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.10.a
		default_option = yes
		add_journal_entry = {
			type = je_the_pink_map
		}
		if = {
			limit = {
				NOT = {
					owes_obligation_to = c:GBR
				}
			}
			set_owes_obligation_to = {
				country = c:GBR
				setting = yes
			}
		}
		else = {
			custom_tooltip = {
				text = portuguese_colonialism.10.a_tt
				create_treaty = {
					name = treaty_name_the_pink_map_treaty
					first_country = root
					second_country = c:GBR
					is_draft = no
					binding_period = { years = 2 }
					articles_to_create = {
						{
							article = money_transfer
							source_country = root
							target_country = c:GBR
							inputs = {
								{ quantity = 200 }
							}
						}
					}
				}
			}
		}
		scope:gbr_scope = {
			change_relations = {
				country = scope:por_scope
				value = 10
			}
		}
		every_subject_or_below = {
			limit = {
				is_direct_subject_of = ROOT
			}
			add_liberty_desire = 5
		}
		c:GBR ?= {
			post_notification = pink_map_britain_accepts_with_favor
		}
	}
	option = {
		name = portuguese_colonialism.10.b
		c:GBR ?= {
			post_notification = pink_map_britain_portugal_backs_down
		}
		scope:gbr_scope = {
			change_relations = {
				country = scope:por_scope
				value = 25
			}
		}
		add_modifier = {
			name = portuguese_backs_down_from_pursuing_the_pink_map_mod
			days = long_modifier_time
		}
		every_interest_group = {
			limit = {
				OR = {
					law_stance = {
						law = law_type:law_colonial_resettlement
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_exploitation
						value > neutral
					}
					law_stance = {
						law = law_type:law_colonial_slavery
						value > neutral
					}
				}
			}
			add_modifier = {
				name = portuguese_refuses_to_back_down_from_pursuing_the_pink_map_ig_mod
				days = long_modifier_time
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_KAZEMBE
			}
			s:STATE_KAZEMBE = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_ZAMBIA
			}
			s:STATE_ZAMBIA = {
				remove_claim = ROOT
			}
		}
		if = {
			limit = {
				has_claim = s:STATE_ZAMBEZI
			}
			s:STATE_ZAMBEZI = {
				remove_claim = ROOT
			}
		}
	}
	option = {
		name = portuguese_colonialism.10.c
		c:GBR ?= {
			post_notification = pink_map_britain_portugal_ignores
			add_modifier = {
				name = portuguese_refuses_to_back_down_from_pursuing_the_pink_map_mod
				days = short_modifier_time
			}
		}
		scope:gbr_scope = {
			change_relations = {
				country = scope:por_scope
				value = -20
			}
		}
		custom_tooltip = portuguese_colonialism.6.b_tt
		hidden_effect = {
			set_variable = por_ignored_gbr_var
		}
		add_journal_entry = {
			type = je_the_pink_map
		}

		add_modifier = {
			name = portuguese_insists_on_pink_map_mod
			days = long_modifier_time
		}
		change_infamy = 25
		s:STATE_KAZEMBE = {
			add_claim = ROOT
		}
		s:STATE_ZAMBIA = {
			add_claim = ROOT
		}
		s:STATE_ZAMBEZI = {
			add_claim = ROOT
		}
	}
}

portuguese_colonialism.15 = { # Goa decision
	type = country_event
	placement = p:x51F0A0.state

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.15.t
	desc = portuguese_colonialism.15.d
	flavor = portuguese_colonialism.15.f

	event_image = {
		video = "ip2_cross_cultural_festival"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	immediate = {
		p:x51F0A0.state = {
			save_scope_as = goa_scope
		}
		ROOT = {
			save_scope_as = por_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.15.a
		default_option = yes
		p:x51F0A0.state = {
			set_state_type = incorporated
			add_modifier = {
				name = portuguese_embraced_goa_migration_mod
				days = long_modifier_time
			}
		}
	}
	option = {
		name = portuguese_colonialism.15.b
		p:x51F0A0.state = {
			set_state_type = incorporated
			add_modifier = {
				name = portuguese_embraced_sol_mod
				days = long_modifier_time
			}
		}
	}
}

portuguese_colonialism.16 = { # Macao decision
	type = country_event
	placement = p:xb031e0.state

	duration = 3

	dlc = dlc016

	title = portuguese_colonialism.16.t
	desc = portuguese_colonialism.16.d
	flavor = portuguese_colonialism.16.f

	event_image = {
		video = "asia_farmers_market"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		p:xb031e0.state = {
			save_scope_as = macao_scope
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = portuguese_colonialism.16.a
		default_option = yes
		p:xb031e0.state = {
			add_modifier = {
				name = portuguese_funded_macao_trade_capacity_mod
				days = long_modifier_time
			}
			add_modifier = {
				name = portuguese_funded_macao_expense_mod
				days = short_modifier_time
				multiplier = money_amount_multiplier_small
			}
		}
	}
	option = {
		name = portuguese_colonialism.16.b
		p:xb031e0.state = {
			add_modifier = {
				name = portuguese_funded_construction_mod
				days = long_modifier_time
			}
			add_modifier = {
				name = portuguese_funded_macao_expense_mod
				days = short_modifier_time
				multiplier = money_amount_multiplier_small
			}
		}
	}
}
