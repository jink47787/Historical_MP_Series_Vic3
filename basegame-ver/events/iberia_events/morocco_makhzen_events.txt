namespace = lands_of_anarchy

lands_of_anarchy.1 = { # Initial event
	type = country_event
	placement = root

	duration = 2

	dlc = dlc016

	title = lands_of_anarchy.1.t
	desc = lands_of_anarchy.1.d
	flavor = lands_of_anarchy.1.f

	event_image = {
		video = "votp_french_algeria"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_map.dds"

	immediate = {
		s:STATE_AL_RIF = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = al_rif_state_scope
			}
		}
		s:STATE_MARRAKECH = {
			random_scope_state = {
				save_scope_as = marrakech_state_scope
			}
		}
		s:STATE_INNER_MOROCCO = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = inner_morocco_state_scope
			}
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = lands_of_anarchy.1.a
		default_option = yes
		custom_tooltip = lands_of_anarchy.1_tt
		scope:marrakech_state_scope ?= {
			hidden_effect = {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			add_modifier = {
				name = state_of_anarchy_scaled_mod
				multiplier = {
					value = "scope:journal_entry.scripted_bar_progress(lands_of_anarchy_tribes_of_marrakech_bar)"
					divide = -100
					add = 5.15
				}
			}
		}
		scope:al_rif_state_scope ?= {
			hidden_effect = {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			add_modifier = {
				name = state_of_anarchy_scaled_mod
				multiplier = {
					value = "scope:journal_entry.scripted_bar_progress(lands_of_anarchy_tribes_of_al_rif_bar)"
					divide = -100
					add = 5.15
				}
			}
		}
		scope:inner_morocco_state_scope ?= {
			hidden_effect = {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			add_modifier = {
				name = state_of_anarchy_scaled_mod
				multiplier = {
					value = "scope:journal_entry.scripted_bar_progress(lands_of_anarchy_tribes_of_inner_morocco_bar)"
					divide = -100
					add = 5.15
				}
			}
		}
		set_variable = anarchy_modifiers_given_var
	}
}

lands_of_anarchy.2 = { # Complete Event
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = lands_of_anarchy.2.t
	desc = lands_of_anarchy.2.d
	flavor = lands_of_anarchy.2.f

	event_image = {
		video = "africa_city_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	immediate = {
		s:STATE_AL_RIF = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = al_rif_state_scope
			}
		}
		s:STATE_MARRAKECH = {
			random_scope_state = {
				save_scope_as = marrakech_state_scope
			}
		}
		s:STATE_INNER_MOROCCO = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = inner_morocco_state_scope
			}
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = lands_of_anarchy.2.a
		default_option = yes
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		add_modifier = {
			name = lands_of_harmony_mod
			days = very_long_modifier_time
			is_decaying = yes
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_tax_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_tax_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_tax_focus_mod
				days = very_long_modifier_time
			}
		}
	}
	option = {
		name = lands_of_anarchy.2.b
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		add_modifier = {
			name = lands_of_harmony_mod
			days = very_long_modifier_time
			is_decaying = yes
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_infrastructure_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_infrastructure_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_infrastructure_focus_mod
				days = very_long_modifier_time
			}
		}
	}
	option = {
		name = lands_of_anarchy.2.c
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		add_modifier = {
			name = lands_of_harmony_mod
			days = very_long_modifier_time
			is_decaying = yes
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_education_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_education_focus_mod
				days = very_long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_harmony_education_focus_mod
				days = very_long_modifier_time
			}
		}
	}
}

lands_of_anarchy.3 = { # Fail Event
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = lands_of_anarchy.3.t
	desc = lands_of_anarchy.3.d
	flavor = lands_of_anarchy.3.f

	event_image = {
		video = "ep1_ca_mountain_pass_civilian"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		s:STATE_AL_RIF = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = al_rif_state_scope
			}
		}
		s:STATE_MARRAKECH = {
			random_scope_state = {
				save_scope_as = marrakech_state_scope
			}
		}
		s:STATE_INNER_MOROCCO = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = inner_morocco_state_scope
			}
		}
	}

	cancellation_trigger = {

	}

	option = {
		name = lands_of_anarchy.3.a
		default_option = yes
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_graft_mod
				days = long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_graft_mod
				days = long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_graft_mod
				days = long_modifier_time
			}
		}
		add_modifier = {
			name = lands_of_anarchy_failed_nation_mod
			days = long_modifier_time
		}
	}
	option = {
		name = lands_of_anarchy.3.b
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_destitution_mod
				days = long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_destitution_mod
				days = long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_destitution_mod
				days = long_modifier_time
			}
		}
		add_modifier = {
			name = lands_of_anarchy_failed_nation_mod
			days = long_modifier_time
		}
	}
	option = {
		name = lands_of_anarchy.3.c
		hidden_effect = {
			scope:al_rif_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:marrakech_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
			scope:inner_morocco_state_scope ?= {
				remove_modifier = state_of_anarchy_scaled_mod
			}
		}
		scope:al_rif_state_scope ?= {
			add_modifier = {
				name = state_of_neglect_mod
				days = long_modifier_time
			}
		}
		scope:marrakech_state_scope ?= {
			add_modifier = {
				name = state_of_neglect_mod
				days = long_modifier_time
			}
		}
		scope:inner_morocco_state_scope ?= {
			add_modifier = {
				name = state_of_neglect_mod
				days = long_modifier_time
			}
		}
		add_modifier = {
			name = lands_of_anarchy_failed_nation_mod
			days = long_modifier_time
		}
	}
}

lands_of_anarchy.4 = { # Tribe leader as IG leader
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = lands_of_anarchy.4.t
	desc = lands_of_anarchy.4.d
	flavor = lands_of_anarchy.4.f

	event_image = {
		video = "middleeast_upperclass_party"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_trade.dds"

	immediate = {
		s:STATE_AL_RIF = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = al_rif_state_scope
			}
		}
		s:STATE_MARRAKECH = {
			random_scope_state = {
				save_scope_as = marrakech_state_scope
			}
		}
		s:STATE_INNER_MOROCCO = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = inner_morocco_state_scope
			}
		}
		ig:ig_armed_forces = {
			save_scope_as = armed_forces_scope
		}
		ig:ig_devout = {
			save_scope_as = devout_scope
		}
		ig:ig_rural_folk ?= {
			save_scope_as = rural_folk_scope
		}
	}

	trigger = {
		any_scope_character = {
			NOT = {
				has_modifier = lands_of_anarchy_tribal_marrakech_leader_mod
			}
		}
	}

	cooldown = { days = stupidly_long_modifier_time }

	cancellation_trigger = {

	}

	option = {
		name = lands_of_anarchy.4.a
		default_option = yes
		custom_tooltip = {
			text = lands_of_anarchy.4.a_tt
			create_character = {
				ig_leader = yes
				interest_group = scope:armed_forces_scope
				culture = cu:berber
				ideology = ideology_jingoist_leader
				age = 40
				on_created = {
					add_modifier = lands_of_anarchy_tribal_marrakech_leader_mod
				}
			}
		}
		add_modifier = {
			name = lands_of_anarchy_tribal_leader_appointed_mod
			days = normal_modifier_time
		}
		scope:armed_forces_scope = {
			add_modifier = {
				name = lands_of_anarchy_armed_forces_tribal_leader_mod
				days = normal_modifier_time
			}
		}

		ai_chance = {
			base = 5
		}
	}
	option = {
		name = lands_of_anarchy.4.b
		custom_tooltip = {
			text = lands_of_anarchy.4.b_tt
			create_character = {
				ig_leader = yes
				interest_group = scope:devout_scope
				culture = cu:berber
				ideology = ideology_theocrat
				age = 40
				on_created = {
					add_modifier = lands_of_anarchy_tribal_al_rif_leader_mod
				}
			}
		}
		add_modifier = {
			name = lands_of_anarchy_tribal_leader_appointed_mod
			days = normal_modifier_time
		}
		scope:devout_scope = {
			add_modifier = {
				name = lands_of_anarchy_devout_tribal_leader_mod
				days = normal_modifier_time
			}
		}

		ai_chance = {
			base = 5
		}
	}
	option = {
		name = lands_of_anarchy.4.c
		custom_tooltip = {
			text = lands_of_anarchy.4.c_tt
			create_character = {
				ig_leader = yes
				interest_group = scope:rural_folk_scope
				culture = cu:berber
				ideology = ideology_anarchist
				age = 40
				on_created = {
					add_modifier = lands_of_anarchy_tribal_inner_morocco_leader_mod
				}
			}
		}
		add_modifier = {
			name = lands_of_anarchy_tribal_leader_appointed_mod
			days = normal_modifier_time
		}
		scope:rural_folk_scope = {
			add_modifier = {
				name = lands_of_anarchy_rural_folk_tribal_leader_mod
				days = normal_modifier_time
			}
		}

		ai_chance = {
			base = 5
		}
	}
	option = {
		name = lands_of_anarchy.4.e
		custom_tooltip = lands_of_anarchy.4.e_tt
		set_variable = {
			name = tribal_leader_appointment_rejected
			days = normal_modifier_time
		}

		ai_chance = {
			base = 0
		}
	}
}

lands_of_anarchy.5 = { # Urban Medicine
	type = country_event
	placement = scope:anarchy_state_scope

	duration = 3

	dlc = dlc016

	title = lands_of_anarchy.5.t
	desc = lands_of_anarchy.5.d
	flavor = lands_of_anarchy.5.f

	event_image = {
		video = "africa_desert_expedition"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		random_scope_state = {
			limit = {
				has_modifier = state_of_anarchy_scaled_mod
			}
			save_scope_as = anarchy_state_scope
		}
		s:STATE_FEZ = {
			random_scope_state = {
				limit = {
					owner = root
				}
				save_scope_as = fez_scope
			}
		}
	}

	trigger = {

	}

	cooldown = { days = very_long_modifier_time }

	cancellation_trigger = {

	}

	option = {
		name = lands_of_anarchy.5.a
		default_option = yes
		add_modifier = {
			name = lands_of_anarchy_sent_medicine_to_tribes_mod
			days = normal_modifier_time
		}
		scope:anarchy_state_scope ?= {
			add_modifier = {
				name = lands_of_anarchy_tribe_recieved_medicine_mod
				days = short_modifier_time
			}
		}
		custom_tooltip = lands_of_anarchy.5.a_tt

		ai_chance = {
			base = 5
		}
	}
	option = {
		name = lands_of_anarchy.5.b
		add_modifier = {
			name = lands_of_anarchy_made_the_rich_send_medicine_to_tribes_mod
			days = normal_modifier_time
		}
		scope:anarchy_state_scope ?= {
			add_modifier = {
				name = lands_of_anarchy_tribe_recieved_medicine_mod
				days = short_modifier_time
			}
		}
		scope:fez_scope = {
			add_radicals_in_state = {
				value = 0.10
				strata = upper
			}
		}
		custom_tooltip = lands_of_anarchy.5.b_tt

		ai_chance = {
			base = 5
		}
	}
	option = {
		name = lands_of_anarchy.5.c
		scope:anarchy_state_scope ?= {
			add_modifier = {
				name = lands_of_anarchy_refused_medicine_mod
				days = normal_modifier_time
			}
			add_radicals_in_state = {
				value = 0.05
				culture = cu:berber
				strata = lower
			}
		}
		scope:fez_scope = {
			add_loyalists_in_state = {
				value = 0.05
			}
		}
		custom_tooltip = lands_of_anarchy.5.c_tt

		ai_chance = {
			base = 0
		}
	}
}
