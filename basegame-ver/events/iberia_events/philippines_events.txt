namespace = philippines

# TODO PRCAL-41476 DLC lock content

# Start-up event for je_philippines_main
philippines.1 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.1.t
	desc = philippines.1.d
	flavor = philippines.1.f

    event_image = {
		video = "ip4_colonial_exploitation_going_well"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {
		NOT = {
			has_journal_entry = je_philippines_main
		}
	}

	immediate = {
		ig:ig_intelligentsia ?= {
			save_scope_as = ilustrado_ig_scope
		}
	}

	option = {
		name = philippines.1.a
		default_option = yes
		add_fervor_target_modifier = { # changes target
			culture = cu:filipino_mestizo
			days = moderately_long_modifier_time
			multiplier = 20
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:tagalog
			days = moderately_long_modifier_time
			multiplier = 10
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:ilocano
			days = moderately_long_modifier_time
			multiplier = 10
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:visayan
			days = moderately_long_modifier_time
			multiplier = 10
		}
		add_modifier = {
			name = modifier_phi_lib_gain
			days = normal_modifier_time
		}
		ai_chance = {
			base = 75
		}
	}
	option = {
		name = philippines.1.b
		add_fervor_target_modifier = { # changes target
			culture = cu:filipino_mestizo
			days = moderately_long_modifier_time
			multiplier = 30
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:tagalog
			days = moderately_long_modifier_time
			multiplier = 5
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:ilocano
			days = moderately_long_modifier_time
			multiplier = 5
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:visayan
			days = moderately_long_modifier_time
			multiplier = 5
		}
		add_modifier = {
			name = modifier_phi_lib_lose
			days = normal_modifier_time
		}
		ai_chance = {
			base = 25
			modifier = {
				trigger = {
					liberty_desire <= 75
				}
				add = 10
			}
			modifier = {
				trigger = {
					liberty_desire <= 50
				}
				add = 15
			}
			modifier = {
				trigger = {
					liberty_desire < define:NDiplomacy|WAR_GOAL_INFAMY_LOW_LIBERTY_DESIRE_THRESHOLD
				}
				add = 20
			}
		}
	}
}

# je_philippines_main complete
# Bayang Magiliw, Beloved Country
philippines.2 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.2.t
	desc = philippines.2.d
	flavor = philippines.2.f

    event_image = {
		video = "ip4_colonial_exploitation_going_well"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {

	}

	immediate = {
		root = { save_scope_as = filipino_nation_scope }
	}
	option = {
		name = philippines.2.a
		default_option = yes
        add_primary_culture = cu:filipino_mestizo
        remove_primary_culture = cu:spanish
        add_modifier = {
            name = modifier_phi_indepenent_vision
            days = long_modifier_time
        }
        add_modifier = {
        	name = modifier_national_consolidation
        	days = long_modifier_time
        }
	}
}

# je_philippines_main reliance outcome
philippines.3 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.3.t
	desc = philippines.3.d
	flavor = philippines.3.f

    event_image = {
		video = "ip4_colonial_exploitation_going_well"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {

	}

	immediate = {
		root = { save_scope_as = filipino_nation_scope }
		ig:ig_intelligentsia ?= {
			save_scope_as = ilustrado_ig_scope
		}
	}
	option = {
		name = philippines.3.a
		default_option = yes
		add_primary_culture = cu:filipino_mestizo
        add_modifier = {
            name = modifier_phi_spanish_vision
            days = long_modifier_time
        }
        add_modifier = {
        	name = modifier_metropole_business_networks
        	days = long_modifier_time
        }
	}
}

# Parish Control
philippines.4 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	cooldown = { days = never_fire_again_modifier_time }

	title = philippines.4.t
	desc = philippines.4.d
	flavor = philippines.4.f

    event_image = {
		video = "ep1_printing_press"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
		game_date >= 1837.1.1
		game_date <= 1880.1.1
	}

	cancellation_trigger = {
		NOT = {
			has_journal_entry = je_philippines_main
		}
	}

	immediate = {
		create_character = {
			template = PHI_pedro_pelaez
			on_created = {
			}
		}
		random_scope_character = {
			limit = {
				has_template = PHI_pedro_pelaez
			}
			save_scope_as = relevant_agitator
		}
	}

	option = {
		name = philippines.4.a
		default_option = yes
		add_fervor_target_modifier = { # changes target
			culture = cu:filipino_mestizo
			days = normal_modifier_time
			multiplier = 10
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:tagalog
			days = normal_modifier_time
			multiplier = 5
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:ilocano
			days = normal_modifier_time
			multiplier = 5
		}
		add_fervor_target_modifier = { # changes target
			culture = cu:visayan
			days = normal_modifier_time
			multiplier = 5
		}
		if = {
			limit = {
				top_overlord = {
					c:SPA ?= this
				}
			}
			change_relations = {
				country = c:SPA
				value = -10
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				trigger = {
					NAND = {
		                has_law_or_variant = law_type:law_right_of_assembly
		                has_law_or_variant = law_type:law_protected_speech
		            }
				}
				add = 25
			}
		}
	}

	option = {
		name = philippines.4.b
		if = {
			limit = {
				top_overlord = {
					c:SPA ?= this
				}
			}
			change_relations = {
				country = c:SPA
				value = 10
			}
		}
		scope:relevant_agitator = {
			add_modifier = {
				name = friar_agitator_popularity
				days = normal_modifier_time
			}
		}
		add_loyalists = {
			culture = cu:spanish
			value = medium_radicals
		}
		ai_chance = {
			base = 25
		}
	}
}

# je_philippines_main_ilustrado_button
philippines.5 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.5.t
	desc = philippines.5.d
	flavor = philippines.5.f

    event_image = {
		video = "ip3_village_school"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {
		NOT = {
			has_journal_entry = je_philippines_main
		}
	}

	immediate = {

	}

	option = {
		name = philippines.5.a
		default_option = yes
		add_modifier = {
			name = ilustrados_education_fervor_add
			days = moderately_long_modifier_time
			is_decaying = yes
		}
		ig:ig_intelligentsia ?= {
			if = {
				limit = {
					has_ideology = ideology:ideology_liberal
				}
				remove_ideology = ideology_liberal
				add_ideology = ideology_ilustrado
			}
			set_ig_trait = ig_trait:ig_trait_westernisation
		}
	}
}

# Formation of the Guardia Civil
philippines.7 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	cooldown = { days = never_fire_again_modifier_time }

	title = philippines.7.t
	desc = philippines.7.d
	flavor = philippines.7.f

    event_image = {
		video = "ep1_transfer_of_authority"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_military.dds"

	trigger = {
		game_date >= 1868.1.1
		c:PHI ?= this
		top_overlord ?= {
			c:SPA ?= this
		}
	}

	cancellation_trigger = {
		NOR = {
			game_date >= 1868.1.1
			c:PHI ?= this
			top_overlord ?= {
				c:SPA ?= this
			}
		}
	}

	immediate = {
		ig:ig_armed_forces = {
			set_interest_group_name = ig_guardia_civil
		}
		set_variable = ig_guardia_civil_active
	}

	option = {
		name = philippines.7.a
		ai_chance = {
			base = 25
			modifier = {
				trigger = {
					any_scope_pop = {
						pop_radical_fraction >= 0.25
					}
				}
				add = 15
			}
		}
		add_liberty_desire = 15
		if = {
			limit = {
				top_overlord = {
					c:SPA ?= this
				}
			}
			change_relations = {
				country = c:SPA
				value = -10
			}
		}
	}

	option = {
		name = philippines.7.b
		default_option = yes
		add_modifier = {
			name = ig_guardia_civil_modifier_b
			days = normal_modifier_time
		}
		add_loyalists = {
			culture = cu:spanish
			value = medium_radicals
		}
		if = {
			limit = {
				top_overlord = {
					c:SPA ?= this
				}
			}
			change_relations = {
				country = c:SPA
				value = 10
			}
		}
		ai_chance = {
			base = 50
			modifier = {
				trigger = {
					liberty_desire <= 75
				}
				add = 10
			}
			modifier = {
				trigger = {
					liberty_desire <= 50
				}
				add = 15
			}
			modifier = {
				trigger = {
					liberty_desire < define:NDiplomacy|WAR_GOAL_INFAMY_LOW_LIBERTY_DESIRE_THRESHOLD
				}
				add = 20
			}
		}
	}
}

# Start-up event for je_philippines_development
philippines.9 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.9.t
	desc = philippines.9.d
	flavor = philippines.9.f

    event_image = {
		video = "unspecific_steam_ship"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {
		NOT = {
			has_journal_entry = je_philippines_development
		}
	}

	immediate = {

	}

	option = {
		name = philippines.9.a
		default_option = yes
		add_modifier = {
			name = philippines_development_modifier_a
			days = long_modifier_time
		}
		add_loyalists = {
			pop_type = capitalists
			value = medium_radicals
		}
		add_loyalists = {
			pop_type = shopkeepers
			value = small_radicals
		}
		add_radicals = {
			pop_type = aristocrats
			value = small_radicals
		}
	}
	option = {
		name = philippines.9.b
		add_modifier = {
			name = philippines_development_modifier_b
			days = long_modifier_time
		}
		add_loyalists = {
			pop_type = aristocrats
			value = medium_radicals
		}
		add_loyalists = {
			pop_type = farmers
			value = small_radicals
		}
		add_radicals = {
			pop_type = capitalists
			value = small_radicals
		}
	}
}

# Completion event for je_philippines_development
philippines.10 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = philippines.10.t
	desc = philippines.10.d
	flavor = philippines.10.f

    event_image = {
		video = "southamerica_factory_opening"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {

	}

	immediate = {
		ig:ig_landowners ?= {
			save_scope_as = landowner_ig_scope
		}
        random_scope_state = {
            limit = {
                state_region = s:STATE_LUZON
            }
            save_scope_as = luzon_scope
        }
        random_scope_state = {
            limit = {
                state_region = s:STATE_VISAYAS
            }
            save_scope_as = visayas_scope
        }
        random_scope_state = {
            limit = {
                state_region = s:STATE_MINDANAO
            }
            save_scope_as = mindanao_scope
        }
	}

	option = {
		name = philippines.10.a
		default_option = yes
		scope:visayas_scope.state_region = {
			add_state_trait = state_trait_port_of_iloilo
		}
		add_loyalists = {
			value = medium_radicals
			pop_type = aristocrats
		}
		add_loyalists = {
			value = medium_radicals
			pop_type = capitalists
		}
		add_modifier = {
			name = modifier_growth_of_the_middle_class
			days = long_modifier_time
		}
		custom_tooltip = {
            text = unlocks_je_philippines_main_ilustrado_button_tt
        }
	}
	option = {
		name = philippines.10.b
		highlighted_option = yes
		add_loyalists = {
			value = medium_radicals
			pop_type = aristocrats
		}
		add_loyalists = {
			value = medium_radicals
			pop_type = capitalists
		}
		add_modifier = {
			name = modifier_growth_of_the_middle_class
			days = long_modifier_time
		}
		trigger = {
			AND = {
				p:x2D5E65.state.owner = {
					this ?= root
				}
				any_scope_state = {
					state_region = s:STATE_MINDANAO
				}
			}
		}
		scope:mindanao_scope.state_region = {
			add_state_trait = state_trait_port_of_davao
		}
		custom_tooltip = {
            text = unlocks_je_philippines_main_ilustrado_button_tt
        }
	}
}

#
philippines.11 = {
	type = country_event
	placement = root

	duration = 3

	title = philippines.11.t
	desc = philippines.11.d
	flavor = philippines.11.f

    event_image = {
		video = "ip3_village_school"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {

	}

	immediate = {
	}
	option = {
		name = philippines.11.a
		default_option = yes
        add_primary_culture = cu:filipino
        start_national_awakening = {
            culture = cu:filipino
            months = 120
            state_region = s:STATE_LUZON
        }
        custom_tooltip = {
            text = filipino_assimilation_tooltip
            every_scope_character = {
                limit = {
                    culture = cu:filipino_mestizo
                }
                change_character_culture = cu:filipino
            }
            every_country = {
                every_scope_pop = {
                    limit = {
                        culture = cu:filipino_mestizo
                    }
                    change_pop_culture = { target = cu:filipino value = 1 }
                }
            }
            every_country = {
                limit = {
                    NOT = {
                        THIS = ROOT
                    }
                    has_interest_marker_in_region = root.capital.region
                }
                post_notification = filipino_culture_genesis
            }
            s:STATE_LUZON = {
                add_homeland = cu:filipino
                remove_homeland = cu:filipino_mestizo
            }
            s:STATE_VISAYAS = {
                add_homeland = cu:filipino
                remove_homeland = cu:filipino_mestizo
            }
            s:STATE_MINDANAO = {
                add_homeland = cu:filipino
                remove_homeland = cu:filipino_mestizo
            }
        }
        every_scope_state = {
            limit = {
                OR = {
                    state_region = s:STATE_LUZON
                    state_region = s:STATE_VISAYAS
                    state_region = s:STATE_MINDANAO
                }
            }
            add_modifier = {
                name = modifier_popular_genesis
                days = long_modifier_time
            }
        }
	}
}

# 
philippines.12 = {
	type = country_event
	placement = root

	duration = 3

	title = philippines.12.t
	desc = philippines.12.d
	flavor = philippines.12.f

    event_image = {
		video = "ip3_village_school"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	trigger = {
		# Triggered by Journal Entry
	}

	cancellation_trigger = {

	}

	immediate = {
	}
	option = {
		name = philippines.12.a
		default_option = yes
        add_primary_culture = cu:filipino_hispanophone
        start_national_awakening = {
            culture = cu:filipino_hispanophone
            months = 120
            state_region = s:STATE_LUZON
        }
        custom_tooltip = {
            text = filipino_hispanophone_assimilation_tooltip
            every_scope_character = {
                limit = {
                    culture = cu:filipino_mestizo
                }
                change_character_culture = cu:filipino_hispanophone
            }
            every_country = {
                every_scope_pop = {
                    limit = {
                        culture = cu:filipino_mestizo
                    }
                    change_pop_culture = { target = cu:filipino_hispanophone value = 1 }
                }
            }
            every_country = {
                limit = {
                    NOT = {
                        THIS = ROOT
                    }
                    has_interest_marker_in_region = root.capital.region
                }
                post_notification = filipino_hispanophone_culture_genesis
            }
            s:STATE_LUZON = {
                add_homeland = cu:filipino_hispanophone
                remove_homeland = cu:filipino_mestizo
            }
            s:STATE_VISAYAS = {
                add_homeland = cu:filipino_hispanophone
                remove_homeland = cu:filipino_mestizo
            }
            s:STATE_MINDANAO = {
                add_homeland = cu:filipino_hispanophone
                remove_homeland = cu:filipino_mestizo
            }
        }
        every_scope_state = {
            limit = {
                OR = {
                    state_region = s:STATE_LUZON
                    state_region = s:STATE_VISAYAS
                    state_region = s:STATE_MINDANAO
                }
            }
            add_modifier = {
                name = modifier_popular_genesis
                days = long_modifier_time
            }
        }
        add_modifier = {
            name = modifier_phi_spanish_vision
            days = long_modifier_time
        }
    }
}
