namespace = portuguese_monarchs

portuguese_monarchs.1 = { # Maria dies while giving birth to 13th child
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_monarchs.1.t
	desc = portuguese_monarchs.1.d
	flavor = portuguese_monarchs.1.f

	gui_window = event_window_1char_tabloid

	left_icon = scope:maria_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/misc/1Character_Banner"

	trigger = {
		c:POR ?= this
		ruler ?= {
			has_template = POR_maria_ii_de_braganca
		}
		game_date >= 1853.1.1
	}

	immediate = {
		ruler = {
			save_scope_as = maria_scope
		}
	}

	cancellation_trigger = {
		ruler = {
			NOT = {
				has_template = POR_maria_ii_de_braganca
			}
		}
	}

	cooldown = {
		days = never_fire_again_modifier_time
	}

	option = {
		name = portuguese_monarchs.1.a
		default_option = yes
		scope:maria_scope ?= {
			kill_character = yes
		}
	}
}

portuguese_monarchs.2 = { # Carlos gets assassinated if there are more radicals than loyalists
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_monarchs.2.t
	desc = portuguese_monarchs.2.d
	flavor = portuguese_monarchs.2.f

	event_image = {
		video = "southamerica_public_figure_assassination"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_fire.dds"

	trigger = {
		c:POR ?= this
		ruler ?= {
			has_template = POR_carlos_i_de_braganca_template
		}
		radical_fraction = {
			value > loyalist_fraction
		}
		has_law = law_type:law_monarchy
		game_date >= 1908.1.1
	}

	immediate = {

	}

	cancellation_trigger = {
		ruler = {
			NOT = {
				has_template = POR_carlos_i_de_braganca_template
			}
		}
	}

	cooldown = {
		days = never_fire_again_modifier_time
	}

	option = {
		name = portuguese_monarchs.2.a
		default_option = yes
		custom_tooltip = {
			create_character = {
				template = POR_manuel_ii_de_braganca_template
			}
			if = {
				limit = {
					any_scope_character = {
						has_template = POR_carlos_i_de_braganca_template
					}
				}
				random_scope_character = {
					limit = {
						has_template = POR_carlos_i_de_braganca_template
					}
					kill_character = {
						hidden = yes
					}
				}
			}
			text = portuguese_monarchs.2_tt
		}
	}
}

portuguese_monarchs.3 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = portuguese_monarchs.3.t
	desc = portuguese_monarchs.3.d
	flavor = portuguese_monarchs.3.f

	event_image = {
		video = "ip4_abdication"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/waving_flag.dds"

	cooldown = {
		days = never_fire_again_modifier_time
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_template = POR_manuel_ii_de_braganca_template
			}
			save_scope_as = manuel_scope
			exile_character = yes
		}
	}

	option = {
		name = portuguese_monarchs.3.a
		default_option = yes
		custom_tooltip = portuguese_monarchs.3_tt
	}
}

portuguese_monarchs.4 = {
	type = country_event
	placement = scope:outbreak_state

	duration = 3

	dlc = dlc016

	title = portuguese_monarchs.4.t
	desc = portuguese_monarchs.4.d
	flavor = portuguese_monarchs.4.f

	event_image = {
		video = "unspecific_sick_in_hospital"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		c:POR ?= this
		ruler ?= {
			has_template = POR_pedro_v_de_braganca_template
		}
		game_date >= 1853.1.1
		game_date <= 1856.1.1
	}

	immediate = {
		random_scope_state = {
			limit = {
				is_capital = no
			}
			save_scope_as = outbreak_state
		}
		scope:outbreak_state = {
			add_modifier = {
				name = disease_outbreak_mod
				days = short_modifier_time
			}
		}
	}

	cancellation_trigger = {
		ruler = {
			NOT = {
				has_template = POR_pedro_v_de_braganca_template
			}
		}
	}

	cooldown = {
		days = never_fire_again_modifier_time
	}

	option = {
		name = portuguese_monarchs.4.a
		default_option = yes
		add_modifier = {
			name = distant_outbreak_aid_mod
			days = short_modifier_time
			multiplier = money_amount_multiplier_small
		}
		scope:outbreak_state = {
			add_modifier = {
				name = aided_for_outbreak_mod
				days = short_modifier_time
			}
		}
	}

	option = {
		name = portuguese_monarchs.4.b
		add_modifier = {
			name = outbreak_site_visit_mod
			days = short_modifier_time
		}
		ruler = {
			if = {
				limit = {
					NOT = {
						has_trait = honorable
					}
				}
				add_trait = honorable
			}
			else = {
				add_modifier = {
					name = visited_hospitals_mod
					days = short_modifier_time
				}
			}
			random_list = {
				10 = {
					add_trait = cancer
				}
				40 = {
					add_trait = tuberculosis
				}
				50 = {

				}
			}
		}
		scope:outbreak_state = {
			add_modifier = {
				name = aided_directly_by_the_ruler_mod
				days = short_modifier_time
			}
		}
	}

	option = {
		name = portuguese_monarchs.4.c
		ruler = {
			if = {
				limit = {
					NOT = {
						has_trait = cruel
					}
				}
				add_trait = cruel
			}
			else = {
				add_modifier = {
					name = refused_outbreak_aid_mod
					days = short_modifier_time
				}
			}
		}
		scope:outbreak_state = {
			add_modifier = {
				name = outbreak_without_aid_mod
				days = 365
			}
		}
	}
}
