on_monthly_pulse_country = {
	on_actions = {
		HMPS_handle_diseconomy_of_scale_pms
	}
}

HMPS_handle_diseconomy_of_scale_pms = { #Country Scope
	effect = {
		every_scope_state = {
			if = {
				limit = {
					can_activate_production_method = {
						building_type = building_urban_center
						production_method = pm_arcades
					}
				}
				activate_production_method = {
					building_type = building_urban_center
					production_method = pm_arcades
				}
			}
			else_if = {
				limit = {
					NOT = { 
						any_scope_building = {
							is_building_type = building_urban_center
							has_active_production_method = pm_arcades
						}
					}
					can_activate_production_method = {
						building_type = building_urban_center
						production_method = pm_covered_markets
					}
				}
				activate_production_method = {
					building_type = building_urban_center
					production_method = pm_covered_markets
				}
			}
			else_if = {
				limit = {
					NOT = { 
						any_scope_building = {
							is_building_type = building_urban_center
							OR = {
								has_active_production_method = pm_arcades
								has_active_production_method = pm_covered_markets
							}
						}
					}
					can_activate_production_method = {
						building_type = building_urban_center
						production_method = pm_market_squares
					}
				}
				activate_production_method = {
					building_type = building_urban_center
					production_method = pm_market_squares
				}
			}
		}
		
#		if = {
#			limit = {
#				has_technology_researched  = elevator
#			}
#			activate_production_method = {
#				building_type = building_urban_center
#				production_method = pm_arcades
#			}
#		}
#		else_if = {
#			limit = {
#				has_technology_researched  = steel_frame_buildings
#			}
#			activate_production_method = {
#				building_type = building_urban_center
#				production_method = pm_covered_markets
#			}
#		}
#		else_if = {
#			limit = {
#				has_technology_researched  = urban_planning
#			}
#			activate_production_method = {
#				building_type = building_urban_center
#				production_method = pm_market_squares
#			}
#		}
	}
}