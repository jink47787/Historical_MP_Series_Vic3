namespace = dominican_events

dominican_events.1 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = dominican_events.1.t
	desc = dominican_events.1.d
	flavor = dominican_events.1.f

    event_image = {
		video = "votp_conspiring"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	cooldown = { days = normal_modifier_time }

	trigger = {
		# Fired by history file
	}

	cancellation_trigger = {
	}

	immediate = {
		random_political_movement = {
			limit = {
				is_political_movement_type = movement_dominican_national
			}
			save_scope_as = dominican_movement
		}
	}

	option = {
		name = dominican_events.1.a
		default_option = yes
		scope:dominican_movement = {
			add_modifier = {
				name = modifier_birth_of_the_liberation_army
				days = long_modifier_time
			}
		}
		add_radicals = {
			culture = cu:spanish
			value = very_large_radicals
		}
		add_radicals = {
			culture = cu:caribeno
			value = large_radicals
		}
		add_radicals = {
			culture = cu:afro_caribeno
			value = medium_radicals
		}
		if = {
			limit = {
				empty_agitator_slots >= 1
				year < 1876
			}
			create_character = {
				template = DOM_juan_pablo_duarte
			}
		}
	}

	option = {
		name = dominican_events.1.b
		scope:dominican_movement = {
			add_modifier = {
				name = modifier_birth_of_the_liberation_army
				days = long_modifier_time
				multiplier = 0.5
			}
		}
		add_radicals = {
			culture = cu:spanish
			value = large_radicals
		}
		add_radicals = {
			culture = cu:caribeno
			value = medium_radicals
		}
		add_radicals = {
			culture = cu:afro_caribeno
			value = small_radicals
		}
		if = {
			limit = {
				empty_agitator_slots >= 1
				year < 1876
			}
			create_character = {
				template = DOM_juan_pablo_duarte
			}
		}
		add_modifier = {
			name = modifier_funding_the_haitian_national_guard
			days = long_modifier_time
			multiplier = money_amount_multiplier_large
		}
		add_modifier = {
			name = modifier_expanding_the_eastern_departments
			days = normal_modifier_time
		}
	}
}

dominican_events.2 = {
	type = country_event
	placement = scope:santo_domingo_state_scope

	duration = 3

	dlc = dlc016

	title = dominican_events.2.t
	desc = dominican_events.2.d
	flavor = dominican_events.2.f

    event_image = {
		video = "votp_barricade"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	cooldown = { days = normal_modifier_time }

	trigger = {
		# Fired by history file
	}

	cancellation_trigger = {
	}

	immediate = {
		every_scope_state = {
			limit = {
				region = sr:region_caribbean
			}
			assign_state_name_region_caribbean = yes
		}
		c:DOM ?= {
			save_scope_as = dominican_scope
			capital = {
				save_scope_as = santo_domingo_state_scope
			}
			if = {
				limit = {
					year < 1864
				}
				create_character = {
					template = DOM_pedro_santana
				}
			}
		}
	}

	option = {
		name = dominican_events.2.a
		default_option = yes
		add_modifier = {
			name = modifier_dominican_mutinies
			days = short_modifier_time
		}
		c:DOM ?= {
			clear_debt = yes
			add_modifier = {
				name = modifier_rural_peon_levies
				days = short_modifier_time
			}
			add_modifier = {
				name = modifier_defection_of_dominican_regiments
				days = short_modifier_time
			}
		}
	}

	option = {
		name = dominican_events.2.b
		add_modifier = {
			name = modifier_dominican_mutinies
			days = short_modifier_time
		}
		c:DOM ?= {
			clear_debt = yes
			add_modifier = {
				name = modifier_rural_peon_levies
				days = short_modifier_time
			}
			add_modifier = {
				name = modifier_defection_of_dominican_regiments
				days = short_modifier_time
			}
		}
		play_as = c:DOM
	}
}

dominican_events.3 = {
	type = country_event
	placement = scope:santo_domingo_state_scope

	duration = 3

	dlc = dlc016

	title = dominican_events.3.t
	desc = dominican_events.3.d
	flavor = dominican_events.3.f

    event_image = {
		video = "ip4_colonial_exploitation_going_well"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	cooldown = { days = normal_modifier_time }

	trigger = {
		# Fired by history file
	}

	cancellation_trigger = {
	}

	immediate = {
		random_scope_state = {
			limit = {
				state_Region = s:STATE_SANTO_DOMINGO
			}
			save_scope_as = santo_domingo_state_scope
		}
	}

	option = {
		name = dominican_events.3.a
		default_option = yes
		add_primary_culture = cu:afro_caribeno
		s:STATE_SANTO_DOMINGO = {
			add_homeland = cu:afro_antillean
		}
		add_culture_acceptance_modifier = {
			culture = cu:caribeno
			multiplier = 20
		}
		ai_chance = {
			base = 10
		}
	}

	option = {
		name = dominican_events.3.b
		add_primary_culture = cu:afro_caribeno
		s:STATE_SANTO_DOMINGO = {
			add_homeland = cu:afro_antillean
		}
		every_scope_state = {
			limit = {
				OR = {
					state_region = s:STATE_HAITI
					state_region = s:STATE_SANTO_DOMINGO
				}
			}
			add_modifier = {
				name = modifier_breaking_dominicans
				days = long_modifier_time
			}
		}
		ai_chance = {
			base = 10
		}
	}
}

dominican_events.4 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = dominican_events.4.t
	desc = dominican_events.4.d
	flavor = dominican_events.4.f

    event_image = {
		video = "ep1_power_blocs"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	cooldown = { days = normal_modifier_time }

	trigger = {
		NOT = {
			has_global_variable = dominican_independence_happened_var
		}
		c:DOM ?= this
		is_at_war = no
		is_diplomatic_play_committed_participant = no
		is_subject = no
	}

	cancellation_trigger = {
	}

	immediate = {
		set_global_variable = dominican_independence_happened_var
		c:SPA ?= {
			save_scope_as = spain_scope
		}
		c:FRA ?= {
			save_scope_as = france_scope
		}
		c:USA ?= {
			save_scope_as = usa_scope
		}
	}

	option = {
		name = dominican_events.4.a
		default_option = yes
		ig:ig_landowners ?= {
			add_modifier = {
				name = modifier_paranoid_landowners
				days = normal_modifier_time
			}
		}
		ig:ig_petty_bourgeoisie ?= {
			add_modifier = {
				name = modifier_vanguards_of_independence
				days = normal_modifier_time
			}
		}
		add_radicals = {
			pop_type = aristocrats
			value = medium_radicals
		}
		add_radicals = {
			pop_type = officers
			value = medium_radicals
		}
		ai_chance = {
			base = 5
		}
	}

	option = {
		name = dominican_events.4.b
		trigger = {
			c:SPA ?= {
				country_rank >= rank_value:major_power
				NOT = {
					is_diplomatic_play_enemy_of = root
				}
			}
		}
		c:SPA ?= {
			trigger_event = { 
				id = dominican_events.5
				popup = yes 
			}
		}
		custom_tooltip = if_they_accept_tt
		show_as_tooltip = {
			c:SPA ?= {
				create_diplomatic_pact = {
					country = c:DOM
					type = puppet
				}
			}
			activate_law = law_type:law_republic
			add_modifier = {
				name = modifier_cibao_unrest
				days = normal_modifier_time
			}
		}
		ai_chance = {
			base = 20
			modifier = {
				trigger = {
					c:SPA ?= {
						relations:root >= relations_threshold:amicable
					}
				}
				add = 10
			}
			modifier = {
				trigger = {
					c:SPA ?= {
						relations:root >= relations_threshold:friendly
					}
				}
				add = 20
			}
			modifier = {
				trigger = {
					c:SPA ?= {
						is_power_bloc_leader = yes
						is_in_same_power_bloc = root
					}
				}
				add = 100
			}
		}
	}
	option = {
		name = dominican_events.4.c
		trigger = {
			c:FRA ?= {
				country_rank >= rank_value:major_power
				NOT = {
					is_diplomatic_play_enemy_of = root
				}
			}
		}
		c:FRA ?= {
			trigger_event = { 
				id = dominican_events.5
				popup = yes 
			}
		}
		custom_tooltip = if_they_accept_tt
		custom_tooltip = samana_lease_tt
		show_as_tooltip = {
			c:FRA ?= {
				create_diplomatic_pact = {
					country = c:DOM
					type = protectorate
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				trigger = {
					c:FRA ?= {
						relations:root >= relations_threshold:amicable
					}
				}
				add = 10
			}
			modifier = {
				trigger = {
					c:FRA ?= {
						relations:root >= relations_threshold:friendly
					}
				}
				add = 20
			}
			modifier = {
				trigger = {
					c:FRA ?= {
						is_power_bloc_leader = yes
						is_in_same_power_bloc = root
					}
				}
				add = 100
			}
		}
	}
	option = {
		name = dominican_events.4.e
		trigger = {
			c:USA ?= {
				country_rank >= rank_value:major_power
				NOT = {
					is_diplomatic_play_enemy_of = root
				}
			}
		}
		c:USA ?= {
			trigger_event = { 
				id = dominican_events.5
				popup = yes 
			}
		}
		custom_tooltip = if_they_accept_tt
		custom_tooltip = samana_lease_tt
		show_as_tooltip = {
			c:USA ?= {
				create_diplomatic_pact = {
					country = c:DOM
					type = protectorate
				}
			}
		}
		ai_chance = {
			base = 10
			modifier = {
				trigger = {
					c:USA ?= {
						relations:root >= relations_threshold:amicable
					}
				}
				add = 10
			}
			modifier = {
				trigger = {
					c:USA ?= {
						relations:root >= relations_threshold:friendly
					}
				}
				add = 20
			}
			modifier = {
				trigger = {
					c:USA ?= {
						is_power_bloc_leader = yes
						is_in_same_power_bloc = root
					}
				}
				add = 100
			}
		}
	}
}

dominican_events.5 = {
	type = country_event
	placement = root

	duration = 3

	dlc = dlc016

	title = dominican_events.5.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = dominican_events.5.d_1
				trigger = {
					c:SPA ?= this
				}
			}
			triggered_desc = {
				desc = dominican_events.5.d_2
			}
		}
	}
	flavor = dominican_events.5.f

    event_image = {
		video = "southamerica_aristocrats"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	cooldown = { days = normal_modifier_time }

	trigger = {
		# Fired by history file
	}

	cancellation_trigger = {
	}

	immediate = {
		c:DOM ?= {
			save_scope_as = dominican_scope
		}
	}

	option = {
		name = dominican_events.5.a
		default_option = yes
		if = {
			limit = {
				NOT = {
					c:SPA ?= this
				}
			}
			custom_tooltip = {
				text = samana_lease_tt
			}
			# Samana Treaty Port
			create_treaty = {
				name = treaty_name_treaty_of_samana
				first_country = root
				second_country = c:DOM

				is_draft = no
				binding_period = { years = 100 }

				articles_to_create = {
					{
						article = treaty_port
						source_country = c:DOM
						target_country = root
						inputs = {
							{ state = s:STATE_SANTO_DOMINGO.region_state:DOM }
						}
					}
					{
						article = money_transfer
						source_country = root
						target_country = c:DOM
						inputs = {
							{ quantity = 2000 }
						}
					}
				}
			}
			create_diplomatic_pact = {
				country = c:DOM
				type = protectorate
			}
		}
		else_if = {
			limit = {
				c:SPA ?= this
			}
			create_diplomatic_pact = {
				country = c:DOM
				type = puppet
			}
			c:DOM ?= {
				activate_law = law_type:law_republic
				add_modifier = {
					name = modifier_cibao_unrest
					days = normal_modifier_time
				}
			}
		}
		if = {
			limit = {
				c:USA ?= {
					country_rank >= rank_value:great_power
					NOT = {
						root ?= this
					}
				}
			}
			c:USA ?= {
				change_relations = {
					country = root
					value = -30
				}
				create_diplomatic_catalyst = {
					type = catalyst_event_negative
					target = root
				}
			}
		}
	}

	option = {
		name = dominican_events.5.b
		c:DOM ?= {
			change_relations = {
				country = root
				value = -30
			}
			create_diplomatic_catalyst = {
				type = catalyst_event_negative
				target = root
			}
		}
		if = {
			limit = {
				c:USA ?= {
					country_rank >= rank_value:great_power
					NOT = {
						root ?= this
					}
				}
			}
			c:USA ?= {
				change_relations = {
					country = root
					value = 10
				}
			}
		}
	}

	after = {
		hidden_effect = { # Samana Americans live in Samana
			if = {
				limit = {
					s:STATE_SANTO_DOMINGO = {
						any_scope_state = {
							owner = {
								c:DOM ?= this
							}
						}
						any_scope_state = {
							is_treaty_port = yes
						}
					}
				}
				s:STATE_SANTO_DOMINGO = {
					random_scope_state = {
						limit = {
							is_treaty_port = yes
						}
						save_temporary_scope_as = samana_scope
					}
					random_scope_state = {
						limit = {
							owner = {
								c:DOM ?= this
							}
						}
						every_scope_pop = {
							limit = {
								culture = cu:afro_american
							}
							move_partial_pop = {
							 	state = scope:samana_scope
							 	population_ratio = 0.9
							}
						}						
					}
				}
			}
		}
	}
}
