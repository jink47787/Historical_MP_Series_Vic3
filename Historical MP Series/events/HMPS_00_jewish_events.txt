namespace = zionism

zionism.1 = { #EVENT FOR COUNTRIES TO SEND JEWISH POPS
	type = country_event
	placement = ROOT
	title = zionism.1.t
	desc = zionism.1.d
	flavor = zionism.1.f
	
	duration = 3
	
	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}
	
	trigger = {
		OR = {
			any_scope_pop = {
				culture = cu:ashkenazi
				size >= 1000
			}
			any_scope_pop = {
				culture = cu:sephardic
				size >= 1000
			}
		}
		NOT = { has_variable = ashkenazi_expulsion_stall }
		has_global_variable = zionism_allowed
	}
	
	immediate = {
		random_scope_state = {
            limit = {
				OR = {
					any_scope_pop = {
						culture = cu:sephardic
					}
				    any_scope_pop = {
                    	culture = cu:ashkenazi
                	}
				}
            }
        	save_scope_as = ashkenazi_origin_state
        }
        random_country = {
            limit = {
                any_scope_state = {
                    state_region = s:STATE_TRANSJORDAN
                }
            }
            save_scope_as = ashkenazi_destination_country
            random_scope_state = {
                limit = {
                    state_region = s:STATE_TRANSJORDAN
                }
                save_scope_as = ashkenazi_destination_state
            }
        }
        cu:ashkenazi = {
            save_scope_as = ashkenazi_culture
        }
        set_variable = {
            name = ashkenazi_expulsion_stall
            months = 18
        }
	}
	
	option = { #allow movement
		name = zionism.1.a
		default_option = yes
		scope:ashkenazi_origin_state = {
            #text = three_pops_deported_tt
            random_scope_pop = {
                limit = {
                    culture = cu:ashkenazi
                    strata = lower
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
            random_scope_pop = {
                limit = {
                    culture = cu:ashkenazi
                    strata = middle
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
            random_scope_pop = {
                limit = {
                    culture = cu:ashkenazi
                    strata = upper
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
			random_scope_pop = {
                limit = {
                    culture = cu:sephardic
                    strata = lower
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
            random_scope_pop = {
                limit = {
                    culture = cu:sephardic
                    strata = middle
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
            random_scope_pop = {
                limit = {
                    culture = cu:sephardic
                    strata = upper
                }
                move_partial_pop = {
					state = scope:ashkenazi_destination_state 
					population_ratio =  0.5
				}
            }
        }
    }

	option = { #stop movement
		name = zionism.1.b
		scope:ashkenazi_origin_state = {
			add_radicals_in_state = {
				value = 0.1
				culture = cu:ashkenazi
			}
			add_radicals_in_state = {
				value = 0.1
				culture = cu:sephardic
			}
		}
	}
}

zionism.2 = { #EVENT FOR OWNER OF TRANSJORDAN THAT ALLOWS JEWISH SETTLEMENT
	type = country_event
	placement = ROOT
	title = zionism.2.t
	desc = zionism.2.d
	flavor = zionism.2.f
	
	duration = 3
	
	event_image = {
		video = "europenorthamerica_capitalists_meeting"
	}
	
	trigger = { #triggers for the owner of jordan after someone researches political agitation, triggers once
		any_scope_state = {
			state_region = s:STATE_TRANSJORDAN
		}
		NOT = {
			OR = {
				has_global_variable = zionism_allowed
				has_global_variable = zionism_denied
			}
		}
		any_country = {
			has_technology_researched = political_agitation
		}
	}

	immediate = {
		
	}

	option = { #allow settlement
		name = zionism.2.a
		set_global_variable = zionism_allowed
		s:STATE_TRANSJORDAN = {
			add_homeland = cu:ashkenazi
			add_homeland = cu:sephardic
		}
		add_radicals = {
			value = 0.10
			culture = cu:mashriqi
		}
	}

	option = { #disallow settlement
		name = zionism.2.b
		add_radicals = {
			value = 0.10
			religion = rel:jewish
		}
		custom_tooltip = {
			text = zionism.2.b.tt
			set_global_variable = zionism_denied
		}
	}
}
